System.register(["./index-legacy.23e55624.js","./project_messages.vue_vue_type_style_index_0_scoped_767d2d8e_lang-legacy.41d4ffec.js"],(function(e,t){"use strict";var o,s,i,n,a,r,l,c,d=document.createElement("style");return d.textContent=".one[data-v-71da9582]{height:10%;position:relative}.two[data-v-71da9582]{height:10%}.three[data-v-71da9582]{position:absolute;left:5%;right:5%;height:80%}.xiangmu[data-v-71da9582]{position:absolute;left:20%}\n",document.head.appendChild(d),{setters:[function(e){o=e.n,s=e.a,i=e.s,n=e.b,a=e.r,r=e.d,l=e.m,c=e.t},function(){}],execute:function(){var t="/assets/nobody.71620b84.png",d={name:"AllProject",created:function(){null==this.selectedProj?this.$message({type:"info",message:"请在左侧选择项目以继续！"}):this.getPersonList()},inject:{user:{defualt:null},selectedProj:{defualt:null}},data:function(){return{labelPosition:"left",headers:[{text:"图标",align:"start",sortable:!1,value:"icon"},{text:"移除",value:"remove"},{text:"更改",value:"change"}],radioGroup:"管理员",personData:[],search:"",setupDialog:!1,changeDialog:!1,newPersonForm:{nameOrEmail:""},idTemp:"",changeRoleForm:{id:"",role:""}}},methods:{getIdenticon:s,gotoWork:function(){var e=this;i({projectId:this.selectedProj.projectId,userId:this.user.id}).then((function(t){if(1===t.data.errcode)e.$message({type:"error",message:"您没有权限查看！"});else{var o=t.data.data,s=[],i=[];for(var n in o)s.push(n),i.push(o[n]);e.$router.push({path:"/workDetail",query:{nameList:s,valueList:i}})}}))},getPersonList:function(){var e=this;n({projectId:this.selectedProj.projectId,userId:this.user.id}).then((function(t){console.log(t),e.personData=t.data.data,e.updateP}))},filterName:function(e,t,o){return console.log("123"),console.log(o),null!=t&&-1!==o.peopleName.toString().indexOf(t)},handleChange:function(e){console.log("123"),this.changeRoleForm.id=e.peopleId,this.changeDialog=!0,console.log(this.changeRoleForm)},handleClose:function(e){this.$confirm("确认关闭？").then((function(){e()})).catch((function(){}))},handleDelete:function(e){var t=this;this.$confirm("此操作将移除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e.peopleJob),a({projectId:t.selectedProj.projectId,personId:e.peopleId,userId:t.user.id}).then((function(e){console.log(e),3==e.data.errcode&&t.$message({type:"error",message:"您没有权限！"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},setupPerson:function(){var e=this;r({projectId:this.selectedProj.projectId,nameOrEmail:this.newPersonForm.nameOrEmail}).then((function(t){console.log(t);var o=t.data.errcode;console.log(o),3===o?e.$message({type:"error",message:"您没有权限邀请成员"}):1===o?e.$message({type:"error",message:"用户不存在"}):2===o?e.$message({type:"error",message:"用户已经加入团队"}):0===o&&(e.$message({type:"success",message:"邀请成功"}),e.setupDialog=!1,e.getPersonList(),e.newPersonForm.nameOrEmail="")}))},cancelSetupPerson:function(){this.setupDialog=!1,this.newPersonForm.id=""},changeRole:function(){var e=this;""!==this.changeRoleForm.role?("开发人员"==this.changeRoleForm.role?this.changeRoleForm.role="A":"管理员"==this.changeRoleForm.role&&(this.changeRoleForm.role="B"),console.log(this.changeRoleForm),l({projectId:this.selectedProj.projectId,userId:this.user.id,role:this.changeRoleForm.role,personId:this.changeRoleForm.id}).then((function(t){console.log(t),3==t.data.errcode&&e.$message({type:"info",message:"您没有权限更改角色"}),e.getPersonList(),e.changeDialog=!1,e.changeRoleForm.id="",e.changeRoleForm.role=""}))):this.$message({type:"error",message:"您还没有选择角色！"})},getColor:function(e){return"A"==e?"orange":"B"==e?"green":"blue"},classify:function(e){return"A"==e?"开发人员":"B"==e?"管理员":"C"==e?"负责人":void 0},getTopicColor:c.getColor}};e("default",o(d,(function(){var e=this,o=e._self._c;return null==this.selectedProj?o("div",{staticStyle:{width:"100%",height:"100%"}}):o("div",{staticStyle:{width:"100%",height:"100%"}},[e._m(0),o("div",{staticClass:"three"},[o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-header":"",items:e.personData,"items-per-page":5,"item-key":"name",search:e.search,"custom-filter":e.filterName,height:""},scopedSlots:e._u([{key:"no-data",fn:function(){return[o("div",{staticStyle:{"text-align":"center"}},[o("img",{attrs:{src:t,height:"200px",width:"170px"}})]),o("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v(" 没有找到成员 ")])]},proxy:!0},{key:"no-results",fn:function(){return[o("div",{staticStyle:{"text-align":"center"}},[o("img",{attrs:{src:t,height:"200px",width:"170px"}})]),o("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v(" 没有找到成员 ")])]},proxy:!0},{key:"top",fn:function(){return[o("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[o("v-text-field",{staticClass:"mx-4",staticStyle:{width:"30%",display:"inline-block"},attrs:{label:"输入名称"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),o("v-btn",{staticStyle:{top:"20%",right:"14%",height:"60%",width:"13%",position:"absolute"},attrs:{depressed:"",color:e.getTopicColor(e.user.topic)},on:{click:e.gotoWork}},[e._v("查看工作量分配 "),o("v-icon",{attrs:{dark:"",right:""}},[e._v(" mdi-account-details ")])],1),o("v-btn",{staticStyle:{top:"20%",right:"2%",height:"60%",width:"10%",position:"absolute"},attrs:{depressed:"",color:e.getTopicColor(e.user.topic)},on:{click:function(t){e.setupDialog=!0}}},[e._v("添加成员 "),o("v-icon",{attrs:{dark:"",right:""}},[e._v(" mdi-account-plus ")])],1)],1)]},proxy:!0},{key:"item.icon",fn:function(t){var s=t.item;return[o("v-list-item",{attrs:{"two-line":""}},[o("v-list-item-avatar",{attrs:{size:"60",color:"indigo"}},[o("v-img",{attrs:{src:e.getIdenticon(s.peopleName,60,"user")}})],1),o("v-list-item-content",[o("v-list-item-title",{staticClass:"text-h5"},[e._v(" "+e._s(s.peopleName)+" ")]),o("v-list-item-subtitle",[o("v-chip",{attrs:{color:e.getColor(s.peopleJob),dark:""}},[e._v(" "+e._s(e.classify(s.peopleJob))+" ")])],1)],1)],1)]}},{key:"item.remove",fn:function(t){var s=t.item;return["C"!=s.peopleJob?o("v-btn",{attrs:{depressed:""},on:{click:function(t){return e.handleDelete(s)}}},[e._v(" 移除用户 ")]):e._e()]}},{key:"item.change",fn:function(t){var s=t.item;return["C"!=s.peopleJob?o("v-btn",{attrs:{depressed:""},on:{click:function(t){return e.handleChange(s)}}},[e._v(" 更改角色 ")]):e._e()]}}],null,!0)})],1),o("el-dialog",{staticStyle:{position:"relative"},attrs:{title:"添加成员",visible:e.setupDialog,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.setupDialog=t}}},[o("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"120px"}},[o("el-form-item",{attrs:{label:"用户名称/邮箱"}},[o("el-input",{model:{value:e.newPersonForm.nameOrEmail,callback:function(t){e.$set(e.newPersonForm,"nameOrEmail",t)},expression:"newPersonForm.nameOrEmail"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.cancelSetupPerson}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.setupPerson}},[e._v("确 定")])],1)],1),o("el-dialog",{staticStyle:{position:"relative"},attrs:{visible:e.changeDialog,width:"40%",height:"30","before-close":e.handleClose},on:{"update:visible":function(t){e.changeDialog=t}},scopedSlots:e._u([{key:"title",fn:function(){return[o("div",[e._v("请选择你要为该成员分配的"),o("strong",[e._v("角色")])])]},proxy:!0}])},[o("v-radio-group",{staticStyle:{top:"50px",position:"absolute"},model:{value:e.changeRoleForm.role,callback:function(t){e.$set(e.changeRoleForm,"role",t)},expression:"changeRoleForm.role"}},[o("v-radio",{attrs:{value:"管理员"},scopedSlots:e._u([{key:"label",fn:function(){return[o("div",[o("strong",{staticClass:"success--text"},[e._v("管理员")])])]},proxy:!0}])}),o("v-radio",{attrs:{value:"开发人员"},scopedSlots:e._u([{key:"label",fn:function(){return[o("div",[o("strong",{staticClass:"orange--text"},[e._v("开发人员")])])]},proxy:!0}])})],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.changeDialog=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.changeRole}},[e._v("确 定")])],1)],1)],1)}),[function(){var e=this._self._c;return e("div",{staticClass:"one"},[e("h1",{staticStyle:{position:"absolute",left:"5%",top:"10%"}},[this._v("项目人员列表")])])}],!1,null,"71da9582",null,null).exports)}}}));
