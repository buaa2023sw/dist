System.register(["./echarts-legacy.76605263.js","./index-legacy.29e20c54.js"],(function(t,e){"use strict";var a,r,o,n;return{setters:[function(t){a=t.a,r=t.e},function(t){o=t.n,n=t.t}],execute:function(){var e={data:function(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted:function(){this.drawP(),this.drawB()},inject:{user:{default:null}},methods:{transform:function(t){return"A"===t?"已完成":"B"===t?"进行中":"C"===t?"未开始":"D"===t?"不合法":void 0},getColor:function(t){return"A"===t?"green":"B"===t?"orange":"C"===t?"blue":"D"===t?"red":void 0},drawP:function(){console.log(a);var t=r.exports.init(this.$refs.chart);window.addEventListener("resize",(function(){t.resize()}));var e=this.$route.query.projectItem,o=this.$route.query.projectItemStart,n=this.$route.query.projectItemEnd,s=this.$route.query.projectState,i=o.map((function(t){return new Date(t).valueOf()}));console.log(i);var l=n.map((function(t,e){return new Date(t).valueOf()-i[e]}));console.log(l);for(var u=i[0],c=0;c<i.length;c++)i[c]<u&&(u=i[c]);console.log(u);var h={title:{text:"任务进度显示图"},tooltip:{trigger:"axis",formatter:function(t){var e,a=t[1],r=s[a.dataIndex],o=i[a.dataIndex],n=i[a.dataIndex]+l[a.dataIndex];return"A"===r?e="已完成":"B"===r?e="进行中":"C"===r?e="未开始":"D"===r?e="延期已完成":"E"===r&&(e="延期未完成"),a.name+"<br/>"+a.seriesName+" : "+new Date(o).getFullYear()+"-"+(new Date(o).getMonth()+1)+"-"+new Date(o).getDate()+"--\x3e"+new Date(n).getFullYear()+"-"+(new Date(o).getMonth()+1)+"-"+new Date(n).getDate()+"<br/>状态："+e}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:e},xAxis:{type:"value",min:u,axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:i},{name:"周期",type:"bar",stack:"Total",itemStyle:{normal:{color:function(t){var e=s[t.dataIndex];return"A"===e?"green":"B"===e?"orange":"C"===e?"blue":"D"===e?"red":"E"===e?"yellow":void 0}}},data:l}]};t.setOption(h)},drawB:function(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(var t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(var e=0;e<this.$route.query.actualDates.length;e++)"2050-12-31"!==this.$route.query.actualDates[e]&&this.chartData.actualDates.push(this.$route.query.actualDates[e]);for(var o=0,n=0;n<this.chartData.workloads.length;n++)o+=this.chartData.workloads[n];console.log(o);for(var s=this.chartData.expectedDates.map((function(t){return new Date(t).valueOf()})),i=[],l=0;l<s.length;l++)i.push(s[l]);s.sort()[0];for(var u=new Set(s),c=Array.from(u),h=[],d=o,f=0;f<c.length;f++){for(var g=0;g<i.length;g++)i[g]==c[f]&&(d-=this.chartData.workloads[g]);h.push([c[f],d])}console.log(h);for(var p=0;p<this.chartData.actualDates.length;p++)""==this.chartData.actualDates[p]&&this.chartData.actualDates.splice(p,1);for(var D=this.chartData.actualDates.map((function(t){return new Date(t).valueOf()})),v=[],w=0;w<D.length;w++)v.push(D[w]);D.sort()[0];var m,y=new Set(D),x=Array.from(y),b=[];d=o;for(var k=0;k<x.length;k++){for(var C=0;C<v.length;C++)v[C]==x[k]&&(d-=this.chartData.workloads[C]);b.push([x[k],d])}function S(t,e){return t[0]-e[0]}console.log(b),m=0==D.length||s[0]<D[0]?s[0]:D[0],m-=864e5,b.push([m,o]),h.push([m,o]),b.sort(S),h.sort(S),console.log(a);var $=r.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",(function(){$.resize()})),$.setOption({title:{text:"燃尽图"},legend:{data:["预期中的剩余工作量","实际的剩余工作量"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:m,axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},yAxis:{type:"value"},series:[{name:"预期中的剩余工作量",type:"line",data:h},{name:"实际的剩余工作量",type:"line",data:b}]})},back:function(){this.$router.go(-1)},getTopicColor:n.getColor}};t("default",o(e,(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[e("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"6%"},attrs:{id:"burnup-chart"}},[t._v(" 燃尽图 ")]),e("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[t._v(" 进度显示图 ")]),e("v-btn",{staticClass:"ma-2",attrs:{color:t.getTopicColor(t.user.topic)},on:{click:t.back}},[e("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-arrow-left ")]),t._v(" 返回 ")],1)],1)}),[],!1,null,null,null,null).exports)}}}));
