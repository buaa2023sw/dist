System.register(["./index-legacy.210b211c.js","./util-legacy.8533f8eb.js"],(function(e,s){"use strict";var t,r,a,l,i=document.createElement("style");return i.textContent="",document.head.appendChild(i),{setters:[function(e){t=e.n,r=e.k,a=e.l},function(e){l=e.u}],execute:function(){var s=function(){var e=this,s=e._self._c;return s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"blue lighten-5",staticStyle:{"min-height":"calc(100vh - 64px)"},attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[s("v-card",{staticClass:"elevation-12",staticStyle:{"max-width":"500px"}},[s("v-card-text",{staticClass:"mt-4 mb-4"},[s("v-form",{on:{submit:function(s){return s.preventDefault(),e.register.apply(null,arguments)}}},[s("v-row",[s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"用户名",rules:e.registerRules.user_name,outlined:"",dense:""},model:{value:e.username,callback:function(s){e.username=s},expression:"username"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"邮箱",rules:e.registerRules.user_email,outlined:"",dense:""},model:{value:e.email,callback:function(s){e.email=s},expression:"email"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"密码",rules:e.registerRules.user_password,outlined:"",dense:"",type:"password"},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"确认密码",rules:e.registerRules.user_confirmPassword,outlined:"",dense:"",type:"password"},model:{value:e.confirmPassword,callback:function(s){e.confirmPassword=s},expression:"confirmPassword"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-2",disabled:!e.valid(),block:""},on:{click:e.register}},[e._v("注册账号")])],1),s("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("已有账号？")]),s("v-btn",{staticClass:"grey--text text--darken-1",attrs:{color:"transparent",text:""},on:{click:function(s){return e.$router.push("/login")}}},[e._v("前往登录")])],1)],1)],1)],1)],1)],1)],1)],1)};e("default",t({name:"Register",data:function(){return{username:"",email:"",password:"",confirmPassword:"",registerRules:{user_name:[function(e){return/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(e)||"用户名只能包含中文、英文或数字，且不能为空"}],user_email:[function(e){return/[\w]+@[A-Za-z]+(\.[A-Za-z0-9]+){1,2}/.test(e)||"非法的邮箱格式"}],user_password:[function(e){return/^.{6,}$/.test(e)||"密码长度至少为6位"}],user_confirmPassword:[function(e){return/^.{6,}$/.test(e)||"确认密码长度至少为6位"}]}}},methods:{valid:function(){return/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.username)&&/[\w]+@[A-Za-z]+(\.[A-Za-z0-9]+){1,2}/.test(this.email)&&/^.{6,}$/.test(this.password)&&/^.{6,}$/.test(this.confirmPassword)},register:function(){var e=this;if(l.trim(this.username)&&l.trim(this.email)&&l.trim(this.password)&&l.trim(this.confirmPassword))if(this.password===this.confirmPassword){var s=r.exports.sha256(this.password);console.log(s),a.post("/api/register",{username:this.username,email:this.email,password:s}).then((function(s){console.log(s.data),1===s.data.errcode?e.$message({type:"error",message:"发生未知错误，无法注册，请联系管理员"}):2===s.data.errcode?e.$message({type:"error",message:"该邮箱已被使用"}):3===s.data.errcode?e.$message({type:"error",message:"该用户名已被使用"}):(e.$message({type:"success",message:"注册成功"}),console.log("??????????"),window.location.href="/login")})).catch((function(e){console.error(e),window.alert("发生未知错误，无法注册，请联系管理员")}))}else this.$message({type:"error",message:"请保证密码和确认密码的一致性"});else this.$message({type:"error",message:"请完整填写所有注册信息"})}}},s,[],!1,null,"55ad2992",null,null).exports)}}}));
