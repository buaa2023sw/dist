import{n as o}from"./index.75fbe3be.js";const r={name:"profile",data(){return{showedUserName:"aaa",userInfo:{username:"John Doe",email:"johndoe@example.com",avatar:"https://randomuser.me/api/portraits/men/75.jpg"},showChangePassword:!1,oldPassword:"",newPassword:"",confirmNewPassword:""}},created(){this.showProfile()},methods:{showProfile(){this.axios.get("/api/user").then(a=>{this.showedUserName=a.data.userInfo.username,this.userInfo=a.data.userInfo}).catch(a=>{console.log(a)})},save(){const a=this.userInfo.username,e=this.userInfo.email;this.axios.put("/api/user",{username:a,email:e}).then(s=>{this.$toast.success("\u4FDD\u5B58\u6210\u529F")}).catch(s=>{this.$toast.error("\u4FDD\u5B58\u5931\u8D25"),console.log(s)})},async changePassword(){this.newPassword!==this.confirmNewPassword&&window.alert("\u8BF7\u4FDD\u8BC1\u65B0\u5BC6\u7801\u548C\u786E\u8BA4\u65B0\u5BC6\u7801\u5185\u5BB9\u4E00\u81F4"),this.newPassword===""&&window.alert("\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"),await this.axios.get("edit_password/",{params:{old_password:this.oldPassword,new_password:this.newPassword,user_id:this.$store.state.userId}}).catch(function(a){console.log(a),window.alert("\u8BF7\u91CD\u65B0\u786E\u8BA4\u539F\u5BC6\u7801")}).then(a=>{if(a.data.errcode!==0){this.res=!1,console.log(a.data.msg),window.alert("\u8BF7\u91CD\u65B0\u786E\u8BA4\u539F\u5BC6\u7801");return}this.showChangePassword=!1,window.alert("\u5BC6\u7801\u4FEE\u6539\u6210\u529F")})},openChangePasswordDialog(){this.showChangePassword=!0},closeChangePasswordDialog(){this.showChangePassword=!1}}};var n=function(){var e=this,s=e._self._c;return s("v-container",{attrs:{fluid:"","fill-height":""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"mx-auto",attrs:{width:"800",height:"300",padding:"16"}},[s("v-card-title",{staticClass:"headline font-weight text-left"},[e._v("\u67E5\u770B\u4E2A\u4EBA\u4FE1\u606F")]),s("v-divider"),s("v-row",{attrs:{align:"center"}},[s("v-col",{staticClass:"text-center",attrs:{cols:"3"}},[s("v-avatar",{attrs:{size:"100"}},[s("img",{attrs:{src:e.userInfo.avatar,alt:"avatar"}})]),s("div",[e._v(" "+e._s(e.showedUserName)+" ")])],1),s("v-col",{attrs:{cols:"8"}},[s("v-text-field",{attrs:{label:"\u7528\u6237\u540D",outlined:"",dense:""},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}}),s("v-text-field",{attrs:{label:"\u90AE\u7BB1",outlined:"",dense:""},model:{value:e.userInfo.email,callback:function(t){e.$set(e.userInfo,"email",t)},expression:"userInfo.email"}})],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:""},on:{click:e.openChangePasswordDialog}},[e._v("\u4FEE\u6539\u5BC6\u7801")]),s("v-btn",{attrs:{color:"primary",text:""},on:{click:e.save}},[e._v("\u4FDD\u5B58")])],1)],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.showChangePassword,callback:function(t){e.showChangePassword=t},expression:"showChangePassword"}},[[s("v-container",{staticClass:"pa-0"},[s("v-card",[s("v-card-title",{staticClass:"headline font-weight text-left"},[e._v("\u4FEE\u6539\u5BC6\u7801")]),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("div",{staticClass:"input-label"},[e._v("\u539F\u5BC6\u7801\uFF1A")])]),s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"input-field"},[s("v-text-field",{attrs:{outlined:"",dense:""},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1)])],1),s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("div",{staticClass:"input-label"},[e._v("\u65B0\u5BC6\u7801\uFF1A")])]),s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"input-field"},[s("v-text-field",{attrs:{outlined:"",dense:""},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1)])],1),s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("div",{staticClass:"input-label"},[e._v("\u786E\u8BA4\u65B0\u5BC6\u7801\uFF1A")])]),s("v-col",{attrs:{cols:"8"}},[s("div",{staticClass:"input-field"},[s("v-text-field",{attrs:{outlined:"",dense:""},model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}})],1)])],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:""},on:{click:e.closeChangePasswordDialog}},[e._v("\u53D6\u6D88")]),s("v-btn",{attrs:{color:"blue",text:""},on:{click:e.changePassword}},[e._v("\u786E\u8BA4\u4FEE\u6539")])],1)],1)],1)]],2)],1)},l=[],i=o(r,n,l,!1,null,"1444f3a2",null,null);const c=i.exports;export{c as default};
