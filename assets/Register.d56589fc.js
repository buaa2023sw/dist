import{n as o,j as l}from"./index.c850761c.js";import{u as a}from"./util.06b4a6d2.js";import{s as i}from"./sha256.e4ce2503.js";const n={name:"Register",data(){return{username:"",email:"",password:"",confirmPassword:""}},methods:{register(){if(!a.trim(this.username)||!a.trim(this.email)||!a.trim(this.password)||!a.trim(this.confirmPassword)){this.$message({type:"error",message:"\u8BF7\u5B8C\u6574\u586B\u5199\u6240\u6709\u6CE8\u518C\u4FE1\u606F"});return}if(this.password!==this.confirmPassword){this.$message({type:"error",message:"\u8BF7\u4FDD\u8BC1\u5BC6\u7801\u548C\u786E\u8BA4\u5BC6\u7801\u7684\u4E00\u81F4\u6027"});return}let r=i.exports.sha256(this.password);console.log(r),l.post("/api/register",{username:this.username,email:this.email,password:r}).then(e=>{console.log(e.data),e.data.errcode===1?this.$message({type:"error",message:"\u53D1\u751F\u672A\u77E5\u9519\u8BEF\uFF0C\u65E0\u6CD5\u6CE8\u518C\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"}):e.data.errcode===2?this.$message({type:"error",message:"\u8BE5\u90AE\u7BB1\u5DF2\u88AB\u4F7F\u7528"}):e.data.errcode===3?this.$message({type:"error",message:"\u8BE5\u7528\u6237\u540D\u5DF2\u88AB\u4F7F\u7528"}):(this.$message({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),console.log("??????????"),window.location.href="/login")}).catch(e=>{console.error(e),window.alert("\u53D1\u751F\u672A\u77E5\u9519\u8BEF\uFF0C\u65E0\u6CD5\u6CE8\u518C\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458")})}}};var c=function(){var e=this,s=e._self._c;return s("v-container",{attrs:{fluid:""}},[s("v-row",{staticClass:"blue lighten-5",staticStyle:{"min-height":"calc(100vh - 64px)"},attrs:{align:"center",justify:"center"}},[s("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[s("v-card",{staticClass:"elevation-12",staticStyle:{"max-width":"500px"}},[s("v-card-text",{staticClass:"mt-4 mb-4"},[s("v-form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[s("v-row",[s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"\u7528\u6237\u540D",outlined:"",dense:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"\u90AE\u7BB1",outlined:"",dense:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"\u5BC6\u7801",outlined:"",dense:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"\u786E\u8BA4\u5BC6\u7801",outlined:"",dense:"",type:"password"},model:{value:e.confirmPassword,callback:function(t){e.confirmPassword=t},expression:"confirmPassword"}})],1),s("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[s("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-2",block:""},on:{click:e.register}},[e._v("\u6CE8\u518C\u8D26\u53F7")])],1),s("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[s("span",{staticClass:"caption grey--text text--darken-1"},[e._v("\u5DF2\u6709\u8D26\u53F7\uFF1F")]),s("v-btn",{staticClass:"grey--text text--darken-1",attrs:{color:"transparent",text:""},on:{click:function(t){return e.$router.push("/login")}}},[e._v("\u524D\u5F80\u767B\u5F55")])],1)],1)],1)],1)],1)],1)],1)],1)},m=[],d=o(n,c,m,!1,null,"15d8558e",null,null);const v=d.exports;export{v as default};
