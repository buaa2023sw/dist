System.register(["./echarts-legacy.bc8d0971.js","./index-legacy.108deeaf.js"],(function(t,e){"use strict";var a,r;return{setters:[function(t){a=t.e},function(t){r=t.n}],execute:function(){t("default",r({data:function(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted:function(){this.drawP(),this.drawB()},methods:{transform:function(t){return"A"===t?"已完成":"B"===t?"进行中":"C"===t?"未开始":"D"===t?"不合法":void 0},getColor:function(t){return"A"===t?"green":"B"===t?"orange":"C"===t?"blue":"D"===t?"red":void 0},drawP:function(){var t=a.exports.init(this.$refs.chart);window.addEventListener("resize",(function(){t.resize()}));var e=this.$route.query.projectItem,r=this.$route.query.projectItemStart,o=this.$route.query.projectItemEnd,n=this.$route.query.projectState,s=r.map((function(t){return new Date(t).valueOf()})),i=o.map((function(t,e){return new Date(t).valueOf()-s[e]})),l={title:{text:"任务进度显示图"},tooltip:{trigger:"axis",formatter:function(t){var e=t[1];console.log(t);var a,r=n[e.dataIndex],o=s[e.dataIndex],l=s[e.dataIndex]+i[e.dataIndex];return console.log(r),"A"===r?a="已完成":"B"===r?a="进行中":"C"===r?a="未开始":"D"===r&&(a="不合法"),e.name+"<br/>"+e.seriesName+" : "+new Date(o)+"--\x3e"+new Date(l)+"天<br/>状态："+a}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:e},xAxis:{type:"value",min:s.sort()[0],axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:s},{name:"周期",type:"bar",stack:"Total",itemStyle:{normal:{color:function(t){console.log("color-----"),console.log(t),console.log(t.dataIndex);var e=n[t.dataIndex];return"A"===e?"green":"B"===e?"orange":"C"===e?"blue":"D"===e?"red":void 0}}},data:i}]};t.setOption(l)},drawB:function(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(var t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(var e=0;e<this.$route.query.actualDates.length;e++)"2050-12-31"!==this.$route.query.actualDates[e]&&this.chartData.actualDates.push(this.$route.query.actualDates[e]);for(var r=0,o=0;o<this.chartData.workloads.length;o++)r+=this.chartData.workloads[o];console.log(r);for(var n=this.chartData.expectedDates.map((function(t){return new Date(t).valueOf()})),s=[],i=0;i<n.length;i++)s.push(n[i]);n.sort()[0];for(var l=new Set(n),c=Array.from(l),u=[],h=r,d=0;d<c.length;d++){for(var f=0;f<s.length;f++)s[f]==c[d]&&(h-=this.chartData.workloads[f]);u.push([c[d],h])}console.log(u);for(var p=0;p<this.chartData.actualDates.length;p++)""==this.chartData.actualDates[p]&&this.chartData.actualDates.splice(p,1);for(var g=this.chartData.actualDates.map((function(t){return new Date(t).valueOf()})),v=[],D=0;D<g.length;D++)v.push(g[D]);g.sort()[0];var m,y=new Set(g),w=Array.from(y),x=[];h=r;for(var b=0;b<w.length;b++){for(var k=0;k<v.length;k++)v[k]==w[b]&&(h-=this.chartData.workloads[k]);x.push([w[b],h])}function I(t,e){return t[0]-e[0]}console.log(x),m=0==g.length||n[0]<g[0]?n[0]:g[0],m-=864e5,x.push([m,r]),u.push([m,r]),x.sort(I),u.sort(I);var S=a.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",(function(){S.resize()})),S.setOption({title:{text:"燃尽图"},legend:{data:["预期中的剩余工作量","实际的剩余工作量"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:m,axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},yAxis:{type:"value"},series:[{name:"预期中的剩余工作量",type:"line",data:u},{name:"实际的剩余工作量",type:"line",data:x}]})},back:function(){this.$router.go(-1)}}},(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[e("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"6%"},attrs:{id:"burnup-chart"}},[t._v(" 燃尽图 ")]),e("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[t._v(" 进度显示图 ")]),e("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:t.back}},[e("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-arrow-left ")]),t._v(" Back ")],1)],1)}),[],!1,null,null,null,null).exports)}}}));
