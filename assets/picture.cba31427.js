import{e as g}from"./echarts.50844d60.js";import{n as w}from"./index.a4ffdfde.js";const v={data(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted(){this.drawP(),this.drawB()},methods:{transform(r){if(r==="A")return"\u5DF2\u5B8C\u6210";if(r==="B")return"\u8FDB\u884C\u4E2D";if(r==="C")return"\u672A\u5F00\u59CB";if(r==="D")return"\u4E0D\u5408\u6CD5"},getColor(r){if(r==="A")return"green";if(r==="B")return"orange";if(r==="C")return"blue";if(r==="D")return"red"},drawP(){var r=g.exports.init(this.$refs.chart);window.addEventListener("resize",function(){r.resize()});let a=this.$route.query.projectItem,n=this.$route.query.projectItemStart,D=this.$route.query.projectItemEnd,f=this.$route.query.projectState,i=n.map(l=>new Date(l).valueOf()),h=D.map((l,e)=>new Date(l).valueOf()-i[e]),u=i.sort()[0];var p={title:{text:"\u4EFB\u52A1\u8FDB\u5EA6\u663E\u793A\u56FE"},tooltip:{trigger:"axis",formatter:function(l){var e=l[1];console.log(l);let s=f[e.dataIndex],c=i[e.dataIndex],m=i[e.dataIndex]+h[e.dataIndex];console.log(s);var d;return s==="A"?d="\u5DF2\u5B8C\u6210":s==="B"?d="\u8FDB\u884C\u4E2D":s==="C"?d="\u672A\u5F00\u59CB":s==="D"&&(d="\u4E0D\u5408\u6CD5"),e.name+"<br/>"+e.seriesName+" : "+new Date(c)+"-->"+new Date(m)+"\u5929<br/>\u72B6\u6001\uFF1A"+d}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:a},xAxis:{type:"value",min:u,axisLabel:{color:"#333",formatter:function(l){let e=new Date(l);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:i},{name:"\u5468\u671F",type:"bar",stack:"Total",itemStyle:{normal:{color:function(l){console.log("color-----"),console.log(l),console.log(l.dataIndex);let e=f[l.dataIndex];if(e==="A")return"green";if(e==="B")return"orange";if(e==="C")return"blue";if(e==="D")return"red"}}},data:h}]};r.setOption(p)},drawB(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(let t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(let t=0;t<this.$route.query.actualDates.length;t++)this.$route.query.actualDates[t]!=="2050-12-31"&&this.chartData.actualDates.push(this.$route.query.actualDates[t]);let r=0;for(let t=0;t<this.chartData.workloads.length;t++)r+=this.chartData.workloads[t];console.log(r);let a=this.chartData.expectedDates.map(t=>new Date(t).valueOf()),n=[];for(let t=0;t<a.length;t++)n.push(a[t]);a.sort()[0];var D=new Set(a),f=Array.from(D);let i=[],h=r;for(let t=0;t<f.length;t++){for(let o=0;o<n.length;o++)n[o]==f[t]&&(h-=this.chartData.workloads[o]);i.push([f[t],h])}console.log(i);for(let t=0;t<this.chartData.actualDates.length;t++)this.chartData.actualDates[t]==""&&this.chartData.actualDates.splice(t,1);let u=this.chartData.actualDates.map(t=>new Date(t).valueOf()),p=[];for(let t=0;t<u.length;t++)p.push(u[t]);u.sort()[0];var l=new Set(u),e=Array.from(l);let s=[];h=r;for(let t=0;t<e.length;t++){for(let o=0;o<p.length;o++)p[o]==e[t]&&(h-=this.chartData.workloads[o]);s.push([e[t],h])}console.log(s);let c;u.length==0?c=a[0]:c=a[0]<u[0]?a[0]:u[0],c=c-24*60*60*1e3,s.push([c,r]),i.push([c,r]);function m(t,o){return t[0]-o[0]}s.sort(m),i.sort(m);const d=g.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",function(){d.resize()}),d.setOption({title:{text:"\u71C3\u5C3D\u56FE"},legend:{data:["\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF","\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:c,axisLabel:{color:"#333",formatter:function(t){let o=new Date(t);return o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()}}},yAxis:{type:"value"},series:[{name:"\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:i},{name:"\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:s}]})},back(){this.$router.go(-1)}}};var y=function(){var a=this,n=a._self._c;return n("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[n("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"6%"},attrs:{id:"burnup-chart"}},[a._v(" \u71C3\u5C3D\u56FE ")]),n("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[a._v(" \u8FDB\u5EA6\u663E\u793A\u56FE ")]),n("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:a.back}},[n("v-icon",{attrs:{dark:"",left:""}},[a._v(" mdi-arrow-left ")]),a._v(" Back ")],1)],1)},x=[],b=w(v,y,x,!1,null,null,null,null);const I=b.exports;export{I as default};
