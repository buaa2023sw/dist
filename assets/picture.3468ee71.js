import{a as g,e as w}from"./echarts.588b2d40.js";import{n as v}from"./index.28b13545.js";const y={data(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted(){this.drawP(),this.drawB()},methods:{transform(a){if(a==="A")return"\u5DF2\u5B8C\u6210";if(a==="B")return"\u8FDB\u884C\u4E2D";if(a==="C")return"\u672A\u5F00\u59CB";if(a==="D")return"\u4E0D\u5408\u6CD5"},getColor(a){if(a==="A")return"green";if(a==="B")return"orange";if(a==="C")return"blue";if(a==="D")return"red"},drawP(){console.log(g);var a=w.exports.init(this.$refs.chart);window.addEventListener("resize",function(){a.resize()});let r=this.$route.query.projectItem,c=this.$route.query.projectItemStart,D=this.$route.query.projectItemEnd,f=this.$route.query.projectState,o=c.map(l=>new Date(l).valueOf());console.log(o);let h=D.map((l,e)=>new Date(l).valueOf()-o[e]);console.log(h);let n=o[0];for(let l=0;l<o.length;l++)o[l]<n&&(n=o[l]);console.log(n);var p={title:{text:"\u4EFB\u52A1\u8FDB\u5EA6\u663E\u793A\u56FE"},tooltip:{trigger:"axis",formatter:function(l){var e=l[1];let i=f[e.dataIndex],u=o[e.dataIndex],m=o[e.dataIndex]+h[e.dataIndex];var d;return i==="A"?d="\u5DF2\u5B8C\u6210":i==="B"?d="\u8FDB\u884C\u4E2D":i==="C"?d="\u672A\u5F00\u59CB":i==="D"?d="\u5EF6\u671F\u5DF2\u5B8C\u6210":i==="E"&&(d="\u5EF6\u671F\u672A\u5B8C\u6210"),e.name+"<br/>"+e.seriesName+" : "+new Date(u).getFullYear()+"-"+(new Date(u).getMonth()+1)+"-"+new Date(u).getDate()+"-->"+new Date(m).getFullYear()+"-"+(new Date(u).getMonth()+1)+"-"+new Date(m).getDate()+"<br/>\u72B6\u6001\uFF1A"+d}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:r},xAxis:{type:"value",min:n,axisLabel:{color:"#333",formatter:function(l){let e=new Date(l);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:o},{name:"\u5468\u671F",type:"bar",stack:"Total",itemStyle:{normal:{color:function(l){let e=f[l.dataIndex];if(e==="A")return"green";if(e==="B")return"orange";if(e==="C")return"blue";if(e==="D")return"red";if(e==="E")return"yellow"}}},data:h}]};a.setOption(p)},drawB(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(let t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(let t=0;t<this.$route.query.actualDates.length;t++)this.$route.query.actualDates[t]!=="2050-12-31"&&this.chartData.actualDates.push(this.$route.query.actualDates[t]);let a=0;for(let t=0;t<this.chartData.workloads.length;t++)a+=this.chartData.workloads[t];console.log(a);let r=this.chartData.expectedDates.map(t=>new Date(t).valueOf()),c=[];for(let t=0;t<r.length;t++)c.push(r[t]);r.sort()[0];var D=new Set(r),f=Array.from(D);let o=[],h=a;for(let t=0;t<f.length;t++){for(let s=0;s<c.length;s++)c[s]==f[t]&&(h-=this.chartData.workloads[s]);o.push([f[t],h])}console.log(o);for(let t=0;t<this.chartData.actualDates.length;t++)this.chartData.actualDates[t]==""&&this.chartData.actualDates.splice(t,1);let n=this.chartData.actualDates.map(t=>new Date(t).valueOf()),p=[];for(let t=0;t<n.length;t++)p.push(n[t]);n.sort()[0];var l=new Set(n),e=Array.from(l);let i=[];h=a;for(let t=0;t<e.length;t++){for(let s=0;s<p.length;s++)p[s]==e[t]&&(h-=this.chartData.workloads[s]);i.push([e[t],h])}console.log(i);let u;n.length==0?u=r[0]:u=r[0]<n[0]?r[0]:n[0],u=u-24*60*60*1e3,i.push([u,a]),o.push([u,a]);function m(t,s){return t[0]-s[0]}i.sort(m),o.sort(m),console.log(g);const d=w.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",function(){d.resize()}),d.setOption({title:{text:"\u71C3\u5C3D\u56FE"},legend:{data:["\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF","\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:u,axisLabel:{color:"#333",formatter:function(t){let s=new Date(t);return s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()}}},yAxis:{type:"value"},series:[{name:"\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:o},{name:"\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:i}]})},back(){this.$router.go(-1)}}};var x=function(){var r=this,c=r._self._c;return c("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[c("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"6%"},attrs:{id:"burnup-chart"}},[r._v(" \u71C3\u5C3D\u56FE ")]),c("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[r._v(" \u8FDB\u5EA6\u663E\u793A\u56FE ")]),c("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:r.back}},[c("v-icon",{attrs:{dark:"",left:""}},[r._v(" mdi-arrow-left ")]),r._v(" \u8FD4\u56DE ")],1)],1)},b=[],k=v(y,x,b,!1,null,null,null,null);const S=k.exports;export{S as default};
