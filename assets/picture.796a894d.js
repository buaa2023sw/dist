import"./echarts.d4edbb7e.js";import{n as v}from"./index.0367cc36.js";import{e as g}from"./echarts.7caaf319.js";const w={data(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted(){this.drawP(),this.drawB()},methods:{drawP(){var l=g.exports.init(this.$refs.chart);window.addEventListener("resize",function(){l.resize()});let e=this.$route.query.projectItem,r=this.$route.query.projectItemStart,m=this.$route.query.projectItemEnd,n=r.map(o=>new Date(o).valueOf()),c=m.map((o,s)=>new Date(o).valueOf()-n[s]),u=n.sort()[0];var i={title:{text:"\u4EFB\u52A1\u8FDB\u5EA6\u663E\u793A\u56FE"},tooltip:{trigger:"axis",formatter:function(o){var s=o[1];return s.name+"<br/>"+s.seriesName+" : "+s.value/(1e3*60*60*24)+"\u5929"}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:e},xAxis:{type:"value",min:u,axisLabel:{color:"#333",formatter:function(o){let s=new Date(o);return s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:n},{name:"\u5468\u671F",type:"bar",stack:"Total",data:c}]};l.setOption(i)},drawB(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(let t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(let t=0;t<this.$route.query.actualDates.length;t++)this.$route.query.actualDates[t]!=="2050-12-31"&&this.chartData.actualDates.push(this.$route.query.actualDates[t]);let l=0;for(let t=0;t<this.chartData.workloads.length;t++)l+=this.chartData.workloads[t];console.log(l);let e=this.chartData.expectedDates.map(t=>new Date(t).valueOf()),r=[];for(let t=0;t<e.length;t++)r.push(e[t]);e.sort()[0];var m=new Set(e),n=Array.from(m);let c=[],u=l;for(let t=0;t<n.length;t++){for(let a=0;a<r.length;a++)r[a]==n[t]&&(u-=this.chartData.workloads[a]);c.push([n[t],u])}console.log(c);for(let t=0;t<this.chartData.actualDates.length;t++)this.chartData.actualDates[t]==""&&this.chartData.actualDates.splice(t,1);let i=this.chartData.actualDates.map(t=>new Date(t).valueOf()),o=[];for(let t=0;t<i.length;t++)o.push(i[t]);i.sort()[0];var s=new Set(i),p=Array.from(s);let d=[];u=l;for(let t=0;t<p.length;t++){for(let a=0;a<o.length;a++)o[a]==p[t]&&(u-=this.chartData.workloads[a]);d.push([p[t],u])}console.log(d);let h;i.length==0?h=e[0]:h=e[0]<i[0]?e[0]:i[0],h=h-24*60*60*1e3,d.push([h,l]),c.push([h,l]);function f(t,a){return t[0]-a[0]}d.sort(f),c.sort(f);const D=g.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",function(){D.resize()}),D.setOption({title:{text:"\u71C3\u5C3D\u56FE"},legend:{data:["\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF","\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:h,axisLabel:{color:"#333",formatter:function(t){let a=new Date(t);return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}}},yAxis:{type:"value"},series:[{name:"\u9884\u671F\u4E2D\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:c},{name:"\u5B9E\u9645\u7684\u5269\u4F59\u5DE5\u4F5C\u91CF",type:"line",data:d}]})},back(){this.$router.go(-1)}}};var y=function(){var e=this,r=e._self._c;return r("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[r("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"5%"},attrs:{id:"burnup-chart"}},[e._v(" \u71C3\u5C3D\u56FE ")]),r("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[e._v(" \u8FDB\u5EA6\u663E\u793A\u56FE ")]),r("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:e.back}},[r("v-icon",{attrs:{dark:"",left:""}},[e._v(" mdi-arrow-left ")]),e._v(" Back ")],1)],1)},x=[],b=v(w,y,x,!1,null,null,null,null);const j=b.exports;export{j as default};
