import{n as l,a,s as n,b as c,d,m as h}from"./index.3250be6a.js";/* empty css                                                                         */const r="/assets/nobody.71620b84.png";const u={name:"AllProject",created(){this.selectedProj==null?this.$message({type:"info",message:"\u8BF7\u5728\u5DE6\u4FA7\u9009\u62E9\u9879\u76EE\u4EE5\u7EE7\u7EED\uFF01"}):this.getPersonList()},inject:{user:{defualt:null},selectedProj:{defualt:null}},data(){return{labelPosition:"left",headers:[{text:"\u56FE\u6807",align:"start",sortable:!1,value:"icon"},{text:"\u79FB\u9664",value:"remove"},{text:"\u66F4\u6539",value:"change"}],radioGroup:"\u7BA1\u7406\u5458",personData:[],search:"",setupDialog:!1,changeDialog:!1,newPersonForm:{nameOrEmail:""},idTemp:"",changeRoleForm:{id:"",role:""}}},methods:{getIdenticon:a,gotoWork(){this.$router.push({path:"/workDetail"})},getPersonList(){n({projectId:this.selectedProj.projectId,userId:this.user.id}).then(o=>{console.log(o),this.personData=o.data.data,this.updateP})},filterName(o,e,t){return console.log("123"),console.log(t),e!=null&&t.peopleName.toString().indexOf(e)!==-1},handleChange(o){console.log("123"),this.changeRoleForm.id=o.peopleId,this.changeDialog=!0,console.log(this.changeRoleForm)},handleClose(o){this.$confirm("\u786E\u8BA4\u5173\u95ED\uFF1F").then(()=>{o()}).catch(()=>{})},handleDelete(o){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u79FB\u9664\u8BE5\u7528\u6237, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{console.log(o.peopleJob),c({projectId:this.selectedProj.projectId,personId:o.peopleId,userId:this.user.id}).then(e=>{console.log(e),e.data.errcode==3&&this.$message({type:"error",message:"\u60A8\u6CA1\u6709\u6743\u9650\uFF01"})})}).catch(()=>{this.$message({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},setupPerson(){d({projectId:this.selectedProj.projectId,nameOrEmail:this.newPersonForm.nameOrEmail}).then(o=>{console.log(o);var e=o.data.errcode;console.log(e),e===3?this.$message({type:"error",message:"\u60A8\u6CA1\u6709\u6743\u9650\u9080\u8BF7\u6210\u5458"}):e===1?this.$message({type:"error",message:"\u7528\u6237\u4E0D\u5B58\u5728"}):e===2?this.$message({type:"error",message:"\u7528\u6237\u5DF2\u7ECF\u52A0\u5165\u56E2\u961F"}):e===0&&(this.$message({type:"success",message:"\u9080\u8BF7\u6210\u529F"}),this.setupDialog=!1,this.getPersonList(),this.newPersonForm.nameOrEmail="")})},cancelSetupPerson(){this.setupDialog=!1,this.newPersonForm.id=""},changeRole(){this.changeRoleForm.role=="\u5F00\u53D1\u4EBA\u5458"?this.changeRoleForm.role="A":this.changeRoleForm.role=="\u7BA1\u7406\u5458"&&(this.changeRoleForm.role="B"),console.log(this.changeRoleForm),h({projectId:this.selectedProj.projectId,userId:this.user.id,role:this.changeRoleForm.role,personId:this.changeRoleForm.id}).then(o=>{console.log(o);var e=o.data.errcode;e==3&&this.$message({type:"info",message:"\u60A8\u6CA1\u6709\u6743\u9650\u66F4\u6539\u89D2\u8272"}),this.getPersonList(),this.changeDialog=!1,this.changeRoleForm.id="",this.changeRoleForm.role=""})},getColor(o){return o=="A"?"orange":o=="B"?"green":"blue"},classify(o){if(o=="A")return"\u5F00\u53D1\u4EBA\u5458";if(o=="B")return"\u7BA1\u7406\u5458";if(o=="C")return"\u8D1F\u8D23\u4EBA"}}};var p=function(){var e=this,t=e._self._c;return this.selectedProj==null?t("div",{staticStyle:{width:"100%",height:"100%"}}):t("div",{staticStyle:{width:"100%",height:"100%"}},[e._m(0),t("div",{staticClass:"three"},[t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-header":"",items:e.personData,"items-per-page":5,"item-key":"name",search:e.search,"custom-filter":e.filterName,height:""},scopedSlots:e._u([{key:"no-data",fn:function(){return[t("div",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:r,height:"200px",width:"170px"}})]),t("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v(" \u6CA1\u6709\u627E\u5230\u6210\u5458 ")])]},proxy:!0},{key:"no-results",fn:function(){return[t("div",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{src:r,height:"200px",width:"170px"}})]),t("div",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[e._v(" \u6CA1\u6709\u627E\u5230\u6210\u5458 ")])]},proxy:!0},{key:"top",fn:function(){return[t("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[t("v-text-field",{staticClass:"mx-4",staticStyle:{width:"30%",display:"inline-block"},attrs:{label:"\u8F93\u5165\u540D\u79F0"},model:{value:e.search,callback:function(s){e.search=s},expression:"search"}}),t("v-btn",{staticStyle:{top:"20%",right:"14%",height:"60%",width:"13%",position:"absolute"},attrs:{depressed:"",color:"primary"},on:{click:e.gotoWork}},[e._v("\u67E5\u770B\u5DE5\u4F5C\u91CF\u5206\u914D "),t("v-icon",{attrs:{dark:"",right:""}},[e._v(" mdi-account-details ")])],1),t("v-btn",{staticStyle:{top:"20%",right:"2%",height:"60%",width:"10%",position:"absolute"},attrs:{depressed:"",color:"primary"},on:{click:function(s){e.setupDialog=!0}}},[e._v("\u6DFB\u52A0\u6210\u5458 "),t("v-icon",{attrs:{dark:"",right:""}},[e._v(" mdi-account-plus ")])],1)],1)]},proxy:!0},{key:"item.icon",fn:function({item:s}){return[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-avatar",{attrs:{size:"60",color:"indigo"}},[t("v-img",{attrs:{src:e.getIdenticon(s.peopleName,60,"user")}})],1),t("v-list-item-content",[t("v-list-item-title",{staticClass:"text-h5"},[e._v(" "+e._s(s.peopleName)+" ")]),t("v-list-item-subtitle",[t("v-chip",{attrs:{color:e.getColor(s.peopleJob),dark:""}},[e._v(" "+e._s(e.classify(s.peopleJob))+" ")])],1)],1)],1)]}},{key:"item.remove",fn:function({item:s}){return[s.peopleJob!="C"?t("v-btn",{attrs:{depressed:""},on:{click:function(i){return e.handleDelete(s)}}},[e._v(" \u79FB\u9664\u7528\u6237 ")]):e._e()]}},{key:"item.change",fn:function({item:s}){return[s.peopleJob!="C"?t("v-btn",{attrs:{depressed:""},on:{click:function(i){return e.handleChange(s)}}},[e._v(" \u66F4\u6539\u89D2\u8272 ")]):e._e()]}}],null,!0)})],1),t("el-dialog",{staticStyle:{position:"relative"},attrs:{title:"\u6DFB\u52A0\u6210\u5458",visible:e.setupDialog,width:"50%","before-close":e.handleClose},on:{"update:visible":function(s){e.setupDialog=s}}},[t("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"\u7528\u6237\u540D\u79F0/\u90AE\u7BB1"}},[t("el-input",{model:{value:e.newPersonForm.nameOrEmail,callback:function(s){e.$set(e.newPersonForm,"nameOrEmail",s)},expression:"newPersonForm.nameOrEmail"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.cancelSetupPerson}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.setupPerson}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{staticStyle:{position:"relative"},attrs:{visible:e.changeDialog,width:"40%",height:"30","before-close":e.handleClose},on:{"update:visible":function(s){e.changeDialog=s}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[e._v("\u8BF7\u9009\u62E9\u4F60\u8981\u4E3A\u8BE5\u6210\u5458\u5206\u914D\u7684"),t("strong",[e._v("\u89D2\u8272")])])]},proxy:!0}])},[t("v-radio-group",{staticStyle:{top:"50px",position:"absolute"},model:{value:e.changeRoleForm.role,callback:function(s){e.$set(e.changeRoleForm,"role",s)},expression:"changeRoleForm.role"}},[t("v-radio",{attrs:{value:"\u7BA1\u7406\u5458"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("strong",{staticClass:"success--text"},[e._v("\u7BA1\u7406\u5458")])])]},proxy:!0}])}),t("v-radio",{attrs:{value:"\u5F00\u53D1\u4EBA\u5458"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("strong",{staticClass:"orange--text"},[e._v("\u5F00\u53D1\u4EBA\u5458")])])]},proxy:!0}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.changeDialog=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.changeRole}},[e._v("\u786E \u5B9A")])],1)],1)],1)},g=[function(){var o=this,e=o._self._c;return e("div",{staticClass:"one"},[e("h1",{staticStyle:{position:"absolute",left:"5%",top:"10%"}},[o._v("\u9879\u76EE\u4EBA\u5458\u5217\u8868")])])}],m=l(u,p,g,!1,null,"59d6ef5a",null,null);const _=m.exports;export{_ as default};
