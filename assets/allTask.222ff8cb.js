import{s as u,a as f,b as h,r as d,c as p,w as v}from"./user.001dc6fa.js";import{n as b}from"./index.84c01e78.js";const w={created(){this.getTaskList(),this.getPersonList()},data:()=>({personNameList:[],personIdList:[],user:{id:1},selectedProj:{id:1},checkMyFlag:!1,search:"",setupFather:!1,setupSon:!1,setupAlarm:!1,detailFlag:!1,editTask:!1,menu:!1,menu1:!1,menu2:!1,sonContribute:0,myName:"\u7F57\u672C",options:["\u5220\u9664\u4EFB\u52A1","\u7F16\u8F91\u4EFB\u52A1","\u8BE6\u7EC6\u4FE1\u606F","\u5B8C\u6210\u4EFB\u52A1"],picker:new Date(Date.now()-new Date().getTimezoneOffset()*6e4).toISOString().substr(0,10),newFatherForm:{name:""},allPerson:["\u77F3\u5B50\u7444","zhaohuiya","ghy"],newSonForm:{name:"",endTime:"",contribute:"",managerName:"",fatherTaskId:""},newAlarmForm:{taskID:"",date:"",time:""},headers:[{text:"\u540D\u79F0",align:"start",sortable:!1,value:"taskName"},{text:"\u5F00\u59CB\u65F6\u95F4",value:""},{text:"\u5B8C\u6210\u65F6\u95F4",value:"deadline"},{text:"\u8D21\u732E\u7A0B\u5EA6",value:"contribute"},{text:"\u72B6\u6001",value:"state"},{text:"\u8D1F\u8D23\u4EBA",value:"managerId"},{text:"",value:"alarm",sortable:!1},{text:"",value:"action",sortable:!1}],tasks:[]}),methods:{getPersonList(){u({projectId:this.selectedProj.id,userId:this.user.id}).then(a=>{console.log(a.data.data);for(let e=0;e<a.data.data.length;e++)this.personIdList.push(a.data.data[e].peopleId),this.personNameList.push(a.data.data[e].peopleName)})},getTaskList(){f({userId:this.user.id,projectId:this.selectedProj.id}).then(a=>{this.tasks=a.data.data,console.log(this.tasks)})},newFather(){this.setupFather=!1,console.log(this.user.id),console.log(this.newFatherForm.name),h({userId:this.user.id,taskName:this.newFatherForm.name,projectId:this.selectedProj.id}).then(a=>{console.log(a)}),this.getTaskList()},deleteTask(a){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u79FB\u9664\u8BE5\u4EFB\u52A1, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{this.$message({type:"success",message:"\u5220\u9664\u6210\u529F!"}),d({taskId:a.taskId,userId:this.user.id}).then(e=>{console.log(e)}),this.getTaskList()}).catch(()=>{this.$message({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},setupNewSon(a){this.setupSon=!0,this.newSonForm.fatherTaskId=a.taskId},newSon(){console.log(this.newSonForm.endTime);let a=this.personIdList[this.personNameList.indexOf(this.newSonForm.managerName)];p({userId:this.user.id,deadline:this.newSonForm.endTime,contribute:this.newSonForm.contribute,managerId:a,fatherTaskId:this.newSonForm.fatherTaskId,projectId:this.selectedProj.id,subTaskName:this.newSonForm.name}).then(e=>{console.log(e)}),console.log(this.newSonForm),this.setupSon=!1,this.newSonForm.contribute=0,this.newSonForm.fatherTaskId="",this.newSonForm.endTime="",this.newSonForm.managerName="",this.newSonForm.name=""},handleClose(a){this.$confirm("\u786E\u8BA4\u5173\u95ED\uFF1F").then(()=>{a()}).catch(()=>{})},checkMyTask(){console.log(this.checkMyFlag),this.checkMyFlag=!0,v({userId:this.user.id,projectId:this.selectedProj.id}).then(a=>{this.tasks=a.data.data})},checkAllTask(){this.getTaskList(),this.checkMyFlag=!1},newAlarm(){this.setupAlarm=!1},switchAction(a,e,t){a=="\u5220\u9664\u4EFB\u52A1"?this.handleDelete(e,t):a=="\u7F16\u8F91\u4EFB\u52A1"?this.editTask=!0:a=="\u8BE6\u7EC6\u4FE1\u606F"?this.detailFlag=!0:actino=="\u5B8C\u6210\u4EFB\u52A1"&&handleComplete()},handleComplete(){},handleDelete(a,e){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u79FB\u9664\u8BE5\u4EFB\u52A1, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{this.$message({type:"success",message:"\u5220\u9664\u6210\u529F!"}),console.log(e),d({taskId:e.taskId,userId:this.user.id}).then(t=>{console.log(t)})}).catch(()=>{this.$message({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},editSubTask(){},transform(a){if(a=="A")return"\u5DF2\u5B8C\u6210";if(a=="B")return"\u8FDB\u884C\u4E2D";if(a=="C")return"\u672A\u5F00\u59CB";if(a=="D")return"\u4E0D\u5408\u6CD5"},getName(a){return console.log(this.personIdList),console.log(this.personNameList),this.personNameList[this.personIdList.indexOf(a)]}}};var k=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"100%"}},[e._m(0),t("div",{staticClass:"three"},[t("v-text-field",{staticStyle:{width:"400px"},attrs:{label:"\u641C\u7D22\u4EFB\u52A1"},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}}),t("v-btn",{staticStyle:{position:"absolute",top:"1%",right:"30%",height:"4%",width:"10%"},attrs:{depressed:"",color:"primary"},on:{click:function(n){e.setupDialog=!0}}},[t("v-icon",{attrs:{left:""}},[e._v(" mdi-align-vertical-bottom ")]),e._v(" \u56FE\u8868\u5C55\u793A")],1),e.checkMyFlag==!1?t("v-btn",{staticStyle:{position:"absolute",top:"1%",right:"17%",height:"4%",width:"10%"},attrs:{depressed:"",color:"primary"},on:{click:e.checkMyTask}},[e._v("\u67E5\u770B\u6211\u7684\u4EFB\u52A1")]):t("v-btn",{staticStyle:{position:"absolute",top:"1%",right:"17%",height:"4%",width:"10%"},attrs:{depressed:"",color:"primary"},on:{click:e.checkAllTask}},[e._v("\u67E5\u770B\u5168\u90E8\u4EFB\u52A1")]),t("v-btn",{staticStyle:{position:"absolute",top:"1%",right:"1%",height:"4%",width:"10%"},attrs:{depressed:"",color:"primary"},on:{click:function(n){e.setupFather=!0}}},[e._v("\u521B\u5EFA\u4EFB\u52A1")]),t("v-container",{staticClass:"grey lighten-5",staticStyle:{position:"relative"},attrs:{fluid:""}},[t("v-data-iterator",{staticStyle:{width:"100%",position:"absolute"},attrs:{items:e.tasks,"item-key":"taskId","hide-default-footer":"","single-expand":!1},scopedSlots:e._u([{key:"default",fn:function({items:n,isExpanded:s,expand:i}){return e._l(n,function(l){return t("v-row",{key:l.taskId,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[t("v-card",{staticStyle:{width:"100%",position:"relative"}},[t("v-card-title",[t("h4",[e._v(e._s(l.taskName))]),t("v-switch",{staticClass:"pl-4 mt-0",staticStyle:{position:"absolute",right:"1%"},attrs:{"input-value":s(l)},on:{change:o=>i(l,o)}})],1),t("v-divider"),s(l)?t("v-data-table",{staticClass:"elevation-1",attrs:{search:e.search,headers:e.headers,items:l.subTaskList,"items-per-page":5,"item-key":"name"},scopedSlots:e._u([{key:"item.state",fn:function({item:o}){return[t("div",[e._v(e._s(e.transform(o.state)))])]}},{key:"item.managerId",fn:function({item:o}){return[t("div",[e._v(e._s(e.getName(o.managerId)))])]}},{key:"item.contribute",fn:function({item:o}){return[t("div",[e._v(e._s(o.contribute)+"%")])]}},{key:"item.deadline",fn:function({item:o}){return[t("div",[e._v(e._s(o.deadline.slice(0,10)))])]}},{key:"item.alarm",fn:function({item:o}){return[t("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(c){e.setupAlarm=!0}}},[e._v(" mdi-alarm ")])]}},{key:"item.action",fn:function({item:o,index:c}){return[t("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:r,attrs:m}){return[t("v-icon",e._g(e._b({staticClass:"mr-2",attrs:{small:""}},"v-icon",m,!1),r),[e._v(" mdi-dots-horizontal ")])]}}],null,!0)},[t("v-list",e._l(e.options,function(r){return t("v-list-item",{key:r.name},[t("v-btn",{attrs:{text:""},on:{click:function(m){return e.switchAction(r,c,o)}}},[e._v(e._s(r))])],1)}),1)],1)]}},{key:"foot",fn:function({item:o}){return[t("v-icon",{staticClass:"mr-2",staticStyle:{position:"absolute",left:"1.5%",top:"82%"},attrs:{large:""},on:{click:function(c){return e.setupNewSon(l)}}},[e._v(" mdi-plus-box ")]),t("v-icon",{staticStyle:{position:"absolute",left:"6%",top:"82%"},attrs:{large:""},on:{click:function(c){return e.deleteTask(l)}}},[e._v(" mdi-delete ")])]}}],null,!0)}):e._e()],1),t("div",{staticClass:"divider"})],1)})}}])})],1)],1),t("el-dialog",{attrs:{title:"\u521B\u5EFA\u4EFB\u52A1",visible:e.setupFather,width:"50%","before-close":e.handleClose},on:{"update:visible":function(n){e.setupFather=n}}},[t("el-form",{ref:"newFatherForm",attrs:{"label-position":e.left,"label-width":"80px",model:e.newFatherForm}},[t("el-form-item",{attrs:{label:"\u4EFB\u52A1\u540D\u79F0"}},[t("el-input",{model:{value:e.newFatherForm.name,callback:function(n){e.$set(e.newFatherForm,"name",n)},expression:"newFatherForm.name"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(n){e.setupFather=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.newFather}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{attrs:{title:"\u521B\u5EFA\u5B50\u4EFB\u52A1",visible:e.setupSon,width:"50%","before-close":e.handleClose},on:{"update:visible":function(n){e.setupSon=n}}},[t("el-form",{ref:"newSonForm",attrs:{"label-position":e.left,"label-iwdth":"80px",model:e.newSonForm}},[t("el-form-item",{attrs:{label:"\u5B50\u4EFB\u52A1\u540D\u79F0"}},[t("el-input",{model:{value:e.newSonForm.name,callback:function(n){e.$set(e.newSonForm,"name",n)},expression:"newSonForm.name"}})],1),t("el-form-item",[t("p1",[e._v("\u5B8C\u6210\u65F6\u95F4")]),t("v-menu",{attrs:{"close-on-content-click":!1,"return-value":e.sad,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(n){e.sad=n},"update:return-value":function(n){e.sad=n}},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("v-combobox",e._g(e._b({attrs:{chips:"","small-chips":"",label:"\u8BF7\u9009\u62E9\u65E5\u671F","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.newSonForm.endTime,callback:function(i){e.$set(e.newSonForm,"endTime",i)},expression:"newSonForm.endTime"}},"v-combobox",s,!1),n))]}}]),model:{value:e.menu,callback:function(n){e.menu=n},expression:"menu"}},[t("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.newSonForm.endTime,callback:function(n){e.$set(e.newSonForm,"endTime",n)},expression:"newSonForm.endTime"}},[t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu=!1}}},[e._v(" Cancel ")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu=!1}}},[e._v(" OK ")])],1)],1)],1),t("el-form-item",{attrs:{label:"\u8D21\u732E\u7A0B\u5EA6"}},[t("v-slider",{staticStyle:{position:"relative",bottom:"-5px"},attrs:{int:"Im a hint",max:"100",min:"0",step:"1","thumb-label":""},model:{value:e.newSonForm.contribute,callback:function(n){e.$set(e.newSonForm,"contribute",n)},expression:"newSonForm.contribute"}})],1),t("p1",{staticStyle:{top:"5%"}},[e._v("\u8D1F\u8D23\u4EBA")]),t("v-select",{attrs:{items:e.personNameList},model:{value:e.newSonForm.managerName,callback:function(n){e.$set(e.newSonForm,"managerName",n)},expression:"newSonForm.managerName"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(n){e.setupSon=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.newSon}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{attrs:{title:"\u8BBE\u7F6E\u63D0\u9192\u65F6\u95F4",visible:e.setupAlarm,width:"25%","before-close":e.handleClose},on:{"update:visible":function(n){e.setupAlarm=n}}},[t("el-form",{ref:"newFatherForm",staticStyle:{poition:"relative"},attrs:{"label-position":e.left,"label-width":"80px",model:e.newFatherForm}},[t("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("v-combobox",e._g(e._b({staticStyle:{width:"100%"},attrs:{chips:"","small-chips":"",label:"\u8BF7\u9009\u62E9\u65E5\u671F","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.newAlarmForm.date,callback:function(i){e.$set(e.newAlarmForm,"date",i)},expression:"newAlarmForm.date"}},"v-combobox",s,!1),n))]}}]),model:{value:e.menu1,callback:function(n){e.menu1=n},expression:"menu1"}},[t("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.newAlarmForm.date,callback:function(n){e.$set(e.newAlarmForm,"date",n)},expression:"newAlarmForm.date"}},[t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu1=!1}}},[e._v(" Cancel ")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu1=!1}}},[e._v(" OK ")])],1)],1),t("v-menu",{staticStyle:{width:"100%"},attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("v-combobox",e._g(e._b({staticStyle:{width:"100%"},attrs:{chips:"","small-chips":"",label:"\u8BF7\u9009\u62E9\u65F6\u95F4","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.newAlarmForm.time,callback:function(i){e.$set(e.newAlarmForm,"time",i)},expression:"newAlarmForm.time"}},"v-combobox",s,!1),n))]}}]),model:{value:e.menu2,callback:function(n){e.menu2=n},expression:"menu2"}},[t("v-time-picker",{staticClass:"mt-4",attrs:{"allowed-hours":e.allowedHours,"allowed-minutes":e.allowedMinutes,format:"24hr",scrollable:""},model:{value:e.newAlarmForm.time,callback:function(n){e.$set(e.newAlarmForm,"time",n)},expression:"newAlarmForm.time"}},[t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu2=!1}}},[e._v(" Cancel ")]),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){e.menu2=!1}}},[e._v(" OK ")])],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(n){e.setupAlarm=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.newAlarm}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{attrs:{title:"\u7F16\u8F91\u5B50\u4EFB\u52A1",visible:e.editTask,width:"50%","before-close":e.handleClose},on:{"update:visible":function(n){e.editTask=n}}},[t("el-form",{ref:"newSonForm",attrs:{"label-position":e.left,"label-iwdth":"80px",model:e.newSonForm}},[t("el-form-item",{attrs:{label:"\u5B50\u4EFB\u52A1\u540D\u79F0"}},[t("el-input",{model:{value:e.newSonForm.name,callback:function(n){e.$set(e.newSonForm,"name",n)},expression:"newSonForm.name"}})],1),t("el-form-item",[t("p1",[e._v("\u5B8C\u6210\u65F6\u95F4")]),t("v-menu",{attrs:{"close-on-content-click":!1,"return-value":e.sad,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(n){e.sad=n},"update:return-value":function(n){e.sad=n}},scopedSlots:e._u([{key:"activator",fn:function({on:n,attrs:s}){return[t("v-combobox",e._g(e._b({attrs:{chips:"","small-chips":"",label:"\u8BF7\u9009\u62E9\u65E5\u671F","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.newSonForm.endTime,callback:function(i){e.$set(e.newSonForm,"endTime",i)},expression:"newSonForm.endTime"}},"v-combobox",s,!1),n))]}}]),model:{value:e.menu,callback:function(n){e.menu=n},expression:"menu"}},[t("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.newSonForm.endTime,callback:function(n){e.$set(e.newSonForm,"endTime",n)},expression:"newSonForm.endTime"}},[t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.editSubTask}},[e._v(" \u786E\u5B9A ")])],1)],1)],1),t("el-form-item",{attrs:{label:"\u8D21\u732E\u7A0B\u5EA6"}},[t("v-slider",{staticStyle:{position:"relative",bottom:"-5px"},attrs:{int:"Im a hint",max:"100",min:"0",step:"1","thumb-label":""},model:{value:e.newSonForm.contribute,callback:function(n){e.$set(e.newSonForm,"contribute",n)},expression:"newSonForm.contribute"}})],1),t("p1",{staticStyle:{top:"5%"}},[e._v("\u8D1F\u8D23\u4EBA")]),t("v-select",{attrs:{items:e.personNameList},model:{value:e.newSonForm.managerId,callback:function(n){e.$set(e.newSonForm,"managerId",n)},expression:"newSonForm.managerId"}})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(n){e.editTask=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.newSon}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{attrs:{"no-title":"",visible:e.detailFlag,width:"50%","before-close":e.handleClose},on:{"update:visible":function(n){e.detailFlag=n}}},[t("v-card",{staticClass:"mx-auto",attrs:{"max-width":"344"}},[t("v-card-text",[t("div",[e._v("Word of the Day")]),t("p",{staticClass:"text-h4 text--primary"},[e._v(" be\u2022nev\u2022o\u2022lent ")]),t("p",[e._v("adjective")]),t("div",{staticClass:"text--primary"},[e._v(" well meaning and kindly."),t("br"),e._v(' "a benevolent smile" ')])]),t("v-card-actions",[t("v-btn",{attrs:{text:"",color:"deep-purple accent-4"}},[e._v(" Learn More ")])],1)],1)],1)],1)},F=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"one"},[e("h1",{staticStyle:{position:"absolute",left:"5%",top:"10%"}},[a._v("\u4EFB\u52A1\u5217\u8868")])])}],g=b(w,k,F,!1,null,"ef65c2ff",null,null);const y=g.exports;export{y as default};
