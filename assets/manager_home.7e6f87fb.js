import{a as o,e as c}from"./echarts.50844d60.js";import{n,j as s}from"./index.a4ffdfde.js";var d=[{icon:"mdi-account-multiple",color:"blue",title:"\u7528\u6237\u603B\u6570",text:"8\uFF08\u4EBA\uFF09"},{icon:"mdi-book-edit-outline",color:"cyan",title:"\u9879\u76EE\u603B\u6570",text:"1100\uFF08\u4E2A\uFF09"}];const u={inject:{user:{default:null}},components:{},data(){return{indicators:d,chartData:[],headers:[{text:"\u9879\u76EE\u89C4\u6A21",value:"name"},{text:"\u4E2A\u6570",value:"value"}]}},mounted(){s.post("/api/management/getProjectsScale",{managerId:this.user.id}).then(a=>{if(console.log(a),a.data.errcode===1){window.alert("\u60A8\u6CA1\u6709\u6743\u9650");let t=null;this.upPie(t)}else{let t=[{value:a.data.tinyNum,name:"\u5FAE\u5C0F\u578B\uFF081~3\u4EBA\uFF09"},{value:a.data.smallNum,name:"\u5C0F\u578B\uFF084~7\u4EBA\uFF09"},{value:a.data.mediumNum,name:"\u4E2D\u578B\uFF088~15\u4EBA\uFF09"},{value:a.data.bigNum,name:"\u5927\u578B\uFF0816~30\u4EBA\uFF09"},{value:a.data.largeNum,name:"\u5DE8\u5927\u578B\uFF08>30\u4EBA\uFF09"}];this.upPie(t)}}).catch(a=>{console.error(a);let t=null;this.upPie(t)})},created(){this.getUserNum(),this.getProjectNum()},methods:{getUserNum(){s.post("/api/management/getUserNum",{managerId:this.user.id}).then(a=>{console.log(a),a.data.errcode===1?(window.alert("\u60A8\u6CA1\u6709\u6743\u9650"),this.indicators[0].text="error"):this.indicators[0].text=a.data.userSum+"\uFF08\u4EBA\uFF09"}).catch(a=>{console.error(a),this.indicators[0].text="error"})},getProjectNum(){this.indicators[1].text=2+"\uFF08\u4E2A\uFF09",s.post("/api/management/getProjectNum",{managerId:this.user.id}).then(a=>{console.log(a),a.data.errcode===1?(window.alert("\u60A8\u6CA1\u6709\u6743\u9650"),this.indicators[1].text="error"):this.indicators[1].text=a.data.projectSum+"\uFF08\u4E2A\uFF09"}).catch(a=>{console.error(a),this.indicators[1].text="error"})},upPie(a){this.chartData=a.map(e=>({name:e.name,value:e.value})),console.log(o);let t=c.exports.init(this.$refs.myChart);window.addEventListener("resize",()=>{t.resize()}),console.log(t),t.setOption({title:{text:"",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:["\u5FAE\u5C0F\u578B\uFF081~3\u4EBA\uFF09","\u5C0F\u578B\uFF084~7\u4EBA\uFF09","\u4E2D\u578B\uFF088~15\u4EBA\uFF09","\u5927\u578B\uFF0816~30\u4EBA\uFF09","\u5DE8\u5927\u578B\uFF08>30\u4EBA\uFF09"]},series:[{name:"\u9879\u76EE\u89C4\u6A21",type:"pie",radius:["50%","70%"],center:["50%","50%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},data:a}]})}}};var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"height-100pc mx-2 goods-home"},[e("v-row",{staticClass:"my-3",attrs:{justify:"center"}},[t._l(t.indicators,function(r,l){return[e("v-col",{key:l,staticClass:"mb-4",attrs:{cols:"12",md:"3"}},[e("v-hover",{scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e("v-card",{staticClass:"item-card",class:{"on-hover":i},attrs:{elevation:i?12:2}},[e("v-row",[e("v-col",{staticClass:"align-center",attrs:{md:"6"}},[e("v-icon",{attrs:{color:r.color,size:"100"}},[t._v(t._s(r.icon))])],1),e("v-col",{staticClass:"align-center justify-center flex-column",attrs:{md:"6"}},[e("div",{staticClass:"text-h5 text-center"},[t._v(t._s(r.title))]),e("div",{staticClass:"text-h7 text-center"},[t._v(t._s(r.text))])])],1)],1)]}}],null,!0)})],1)]})],2),e("v-row",[[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-card",{staticClass:"fill-height"},[e("v-card-title",{staticClass:"white"},[t._v("\u4E0D\u540C\u89C4\u6A21\u9879\u76EE\u4E2A\u6570-\u997C\u72B6\u56FE")]),e("v-card-text",{staticClass:"d-flex flex-column",staticStyle:{width:"100%",height:"100%"}},[e("div",{ref:"myChart",staticStyle:{height:"300px"}})])],1)],1),e("v-col",{attrs:{cols:"6"}},[e("v-card",{staticClass:"fill-height"},[e("v-card-title",{staticClass:"white"},[t._v("\u4E0D\u540C\u89C4\u6A21\u9879\u76EE\u4E2A\u6570-\u8868\u683C")]),e("v-card-text",[e("v-data-table",{attrs:{headers:t.headers,items:t.chartData,"hide-default-footer":""},scopedSlots:t._u([{key:"item.value",fn:function({item:r}){return[t._v(" "+t._s(r.value)+" ")]}}])}),t.chartData.length===0?e("div",[t._v("\u6682\u65E0\u6570\u636E")]):t._e()],1)],1)],1)],1)],1)]],2)],1)},h=[],v=n(u,m,h,!1,null,"e93fd9f4",null,null);const g=v.exports;export{g as default};
