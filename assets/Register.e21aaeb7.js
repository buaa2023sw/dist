import{n as i,k as l,l as o}from"./index.3250be6a.js";import{u as a}from"./util.06b4a6d2.js";const n={name:"Register",data(){return{username:"",email:"",password:"",confirmPassword:"",registerRules:{user_name:[function(t){return/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(t)||"\u7528\u6237\u540D\u53EA\u80FD\u5305\u542B\u4E2D\u6587\u3001\u82F1\u6587\u6216\u6570\u5B57\uFF0C\u4E14\u4E0D\u80FD\u4E3A\u7A7A"}],user_email:[function(t){return/[\w]+@[A-Za-z]+(\.[A-Za-z0-9]+){1,2}/.test(t)||"\u975E\u6CD5\u7684\u90AE\u7BB1\u683C\u5F0F"}],user_password:[function(t){return/^.{6,}$/.test(t)||"\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4F4D"}],user_confirmPassword:[function(t){return/^.{6,}$/.test(t)||"\u786E\u8BA4\u5BC6\u7801\u957F\u5EA6\u81F3\u5C11\u4E3A6\u4F4D"}]}}},methods:{valid(){return/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.username)&&/[\w]+@[A-Za-z]+(\.[A-Za-z0-9]+){1,2}/.test(this.email)&&/^.{6,}$/.test(this.password)&&/^.{6,}$/.test(this.confirmPassword)},register(){if(!a.trim(this.username)||!a.trim(this.email)||!a.trim(this.password)||!a.trim(this.confirmPassword)){this.$message({type:"error",message:"\u8BF7\u5B8C\u6574\u586B\u5199\u6240\u6709\u6CE8\u518C\u4FE1\u606F"});return}if(this.password!==this.confirmPassword){this.$message({type:"error",message:"\u8BF7\u4FDD\u8BC1\u5BC6\u7801\u548C\u786E\u8BA4\u5BC6\u7801\u7684\u4E00\u81F4\u6027"});return}let t=l.exports.sha256(this.password);console.log(t),o.post("/api/register",{username:this.username,email:this.email,password:t}).then(s=>{console.log(s.data),s.data.errcode===1?this.$message({type:"error",message:"\u53D1\u751F\u672A\u77E5\u9519\u8BEF\uFF0C\u65E0\u6CD5\u6CE8\u518C\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"}):s.data.errcode===2?this.$message({type:"error",message:"\u8BE5\u90AE\u7BB1\u5DF2\u88AB\u4F7F\u7528"}):s.data.errcode===3?this.$message({type:"error",message:"\u8BE5\u7528\u6237\u540D\u5DF2\u88AB\u4F7F\u7528"}):(this.$message({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),console.log("??????????"),window.location.href="/login")}).catch(s=>{console.error(s),window.alert("\u53D1\u751F\u672A\u77E5\u9519\u8BEF\uFF0C\u65E0\u6CD5\u6CE8\u518C\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458")})}}};var c=function(){var s=this,e=s._self._c;return e("v-container",{attrs:{fluid:""}},[e("v-row",{staticClass:"blue lighten-5",staticStyle:{"min-height":"calc(100vh - 64px)"},attrs:{align:"center",justify:"center"}},[e("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"8",md:"6",lg:"4"}},[e("v-card",{staticClass:"elevation-12",staticStyle:{"max-width":"500px"}},[e("v-card-text",{staticClass:"mt-4 mb-4"},[e("v-form",{on:{submit:function(r){return r.preventDefault(),s.register.apply(null,arguments)}}},[e("v-row",[e("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"\u7528\u6237\u540D",rules:s.registerRules.user_name,outlined:"",dense:""},model:{value:s.username,callback:function(r){s.username=r},expression:"username"}})],1),e("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"\u90AE\u7BB1",rules:s.registerRules.user_email,outlined:"",dense:""},model:{value:s.email,callback:function(r){s.email=r},expression:"email"}})],1),e("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"\u5BC6\u7801",rules:s.registerRules.user_password,outlined:"",dense:"",type:"password"},model:{value:s.password,callback:function(r){s.password=r},expression:"password"}})],1),e("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("v-text-field",{attrs:{label:"\u786E\u8BA4\u5BC6\u7801",rules:s.registerRules.user_confirmPassword,outlined:"",dense:"",type:"password"},model:{value:s.confirmPassword,callback:function(r){s.confirmPassword=r},expression:"confirmPassword"}})],1),e("v-col",{staticClass:"mb-3",attrs:{cols:"12"}},[e("v-btn",{staticClass:"white--text",attrs:{color:"blue darken-2",disabled:!s.valid(),block:""},on:{click:s.register}},[s._v("\u6CE8\u518C\u8D26\u53F7")])],1),e("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e("span",{staticClass:"caption grey--text text--darken-1"},[s._v("\u5DF2\u6709\u8D26\u53F7\uFF1F")]),e("v-btn",{staticClass:"grey--text text--darken-1",attrs:{color:"transparent",text:""},on:{click:function(r){return s.$router.push("/login")}}},[s._v("\u524D\u5F80\u767B\u5F55")])],1)],1)],1)],1)],1)],1)],1)],1)},u=[],m=i(n,c,u,!1,null,"55ad2992",null,null);const p=m.exports;export{p as default};
