System.register(["./index-legacy.29e20c54.js","./util-legacy.8533f8eb.js"],(function(e,s){"use strict";var t,a,o,r,n=document.createElement("style");return n.textContent="",document.head.appendChild(n),{setters:[function(e){t=e.n,a=e.l,o=e.e},function(e){r=e.u}],execute:function(){e("default",t({inject:{user:{default:null}},data:function(){return{msg:null,search:"",headers:[{text:"用户名",align:"start",value:"name"},{text:"邮箱",value:"email"},{text:"注册时间",value:"registerTime"},{text:"状态",value:"status"},{text:"",sortable:!1,value:"resetPassword"},{text:"",sortable:!1,value:"userProfile"},{text:"",sortable:!1,value:"userProject"}],userMessages:[],showResetPassword:!1,userResetPasswordDialogMessage:"",showChangeUserStatus:!1,userStatusDialogMessage:"",selectedStatus:"",statusList:[{label:"正常",value:"A"},{label:"禁用",value:"B"}],showUserProfile:!1,userProfileDialogMessage:"",gotoUserProjectPageMessage:""}},created:function(){this.showUserMessages()},methods:{pro:function(e){return r.processTime(e)},showUserMessages:function(){var e=this;console.log(this.user.id),a.post("/api/management/showUsers",{managerId:this.user.id}).then((function(s){console.log(s),1===s.data.errcode?e.$message({type:"error",message:"您没有权限"}):e.userMessages=s.data.users})).catch((function(s){console.error(s),e.userMessages=null}))},openResetPasswordDialog:function(e){this.userResetPasswordDialogMessage=e,console.log("open reset password dialog"),console.log(this.userResetPasswordDialogMessage),this.showResetPassword=!0},closeResetPasswordDialog:function(){this.showResetPassword=!1,console.log("close reset password dialog"),this.userResetPasswordDialogMessage=""},resetPassword:function(){var e=this,s=this.userResetPasswordDialogMessage.id;a.post("/api/management/resetUserPassword",{managerId:this.user.id,userId:s}).then((function(s){console.log(s.data),1===s.data.errcode?e.$message({type:"error",message:"您没有该权限"}):e.$message({type:"success",message:"成功将用户"+s.data.name+"的密码修改为"+s.data.resetPassword})})).catch((function(e){console.error(e)})),this.showResetPassword=!1,this.userResetPasswordDialogMessage=""},openChangeUserStatusDialog:function(e){console.log(e),console.log("open change user status dialog"),this.userStatusDialogMessage=e,this.selectedStatus=e.status,this.showChangeUserStatus=!0},closeChangeUserStatusDialog:function(){this.showChangeUserStatus=!1,console.log("close change user status dialog"),this.userStatusDialogMessage="",this.selectedStatus=""},changeStatus:function(){var e=this;console.log(this.selectedStatus);var s=this.userStatusDialogMessage.id,t=this.user.id;a.post("/api/management/changeUserStatus",{managerId:t,userId:s,changeToStatus:this.selectedStatus}).then((function(s){if(e.showChangeUserStatus=!1,console.log(s.data),1===s.data.errcode)e.$message({type:"error",message:"您没有该权限"});else if(2===s.data.errcode){var t;t="A"===e.selectedStatus?"正常":"禁用",e.$message({type:"info",message:"用户"+e.userStatusDialogMessage.name+"的状态已为"+t})}else"A"===e.selectedStatus?e.$message({type:"success",message:"成功将用户"+e.userStatusDialogMessage.name+"的状态恢复为正常"}):e.$message({type:"success",message:"成功将用户"+e.userStatusDialogMessage.name+"的状态修改为禁用"});e.userStatusDialogMessage="",e.selectedStatus="",e.showUserMessages()})).catch((function(s){e.showChangeUserStatus=!1,e.userStatusDialogMessage="",e.selectedStatus="",console.error(s)}))},openUserProfileDialog:function(e){console.log(e),this.userProfileDialogMessage=e,this.showUserProfile=!0},closeUserProfileDialog:function(e){this.showUserProfile=!1,this.userProfileDialogMessage=""},saveProfile:function(){this.showUserProfile=!1},gotoUserPage:function(e){var s=this;console.log("232534"),o.set("manager",o.get("user")),console.log(o.get("manager")),a.post("/api/getUserInfo",{managerId:this.user.id,userId:e.id}).then((function(e){console.log(e.data),1===e.data.errcode?s.$message({type:"error",message:"用户不存在"}):(o.set("user",JSON.stringify(e.data.data)),s.$message({type:"success",message:"跳转成功"}),o.set("from",0),window.location.href="/allProject")})).catch((function(e){console.error(e)}))},getColor:function(e){return"A"===e?"green":"B"===e?"red":void 0},transform:function(e){return"A"===e?"正常":"B"===e?"禁用":void 0}}},(function(){var e=this,s=e._self._c;return s("v-container",[s("v-card",[s("v-card-title",[s("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"搜索","single-line":"","hide-details":""},model:{value:e.search,callback:function(s){e.search=s},expression:"search"}})],1),s("v-data-table",{attrs:{headers:e.headers,items:e.userMessages,search:e.search},scopedSlots:e._u([{key:"item.status",fn:function(t){var a=t.item;return[s("v-chip",{attrs:{color:e.getColor(a.status),dark:""},on:{click:function(s){return e.openChangeUserStatusDialog(a)}}},[e._v(" "+e._s(e.transform(a.status))+" ")])]}},{key:"item.resetPassword",fn:function(t){var a=t.item;return[s("v-btn",{staticClass:"ml-1",attrs:{small:"",outlined:""},on:{click:function(s){return e.openResetPasswordDialog(a)}}},[e._v("重置用户密码")])]}},{key:"item.registerTime",fn:function(s){var t=s.item;return[e._v(" "+e._s(e.pro(t.registerTime))+" ")]}},{key:"item.userProject",fn:function(t){var a=t.item;return[s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[s("v-btn",e._g(e._b({attrs:{icon:"",color:"blue"},on:{click:function(s){return e.gotoUserPage(a)}}},"v-btn",r,!1),o),[s("v-icon",[e._v("mdi-link-variant")])],1)]}}],null,!0)},[s("span",[e._v("以该用户视角进入用户端")])])]}}])})],1),s("v-dialog",{attrs:{width:"300"},model:{value:e.showResetPassword,callback:function(s){e.showResetPassword=s},expression:"showResetPassword"}},[[s("v-container",{staticClass:"pa-0"},[s("v-card",[s("v-card-title",{staticClass:"headline font-weight text-left"},[e._v(" 重置用户"+e._s(e.userResetPasswordDialogMessage.name)+"的密码 ")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:""},on:{click:e.closeResetPasswordDialog}},[e._v("取消")]),s("v-btn",{attrs:{color:"blue",text:""},on:{click:e.resetPassword}},[e._v("确认")])],1)],1)],1)]],2),s("v-dialog",{attrs:{width:"300"},model:{value:e.showChangeUserStatus,callback:function(s){e.showChangeUserStatus=s},expression:"showChangeUserStatus"}},[[s("v-container",{staticClass:"pa-0"},[s("v-card",[s("v-card-title",{staticClass:"headline font-weight text-left"},[e._v(" 修改用户"+e._s(e.userStatusDialogMessage.name)+"的状态 ")]),s("v-divider"),s("v-card-text",[s("v-radio-group",{model:{value:e.selectedStatus,callback:function(s){e.selectedStatus=s},expression:"selectedStatus"}},e._l(e.statusList,(function(e){return s("v-radio",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:""},on:{click:e.closeChangeUserStatusDialog}},[e._v("取消")]),s("v-btn",{attrs:{color:"blue",text:""},on:{click:e.changeStatus}},[e._v("确认修改")])],1)],1)],1)]],2),s("v-dialog",{attrs:{width:"500"},model:{value:e.showUserProfile,callback:function(s){e.showUserProfile=s},expression:"showUserProfile"}},[[s("v-container",{staticClass:"pa-0"},[s("v-card",[s("v-card-title",{staticClass:"headline font-weight text-left"},[e._v(" 用户"+e._s(e.userProfileDialogMessage.name)+"的个人信息 ")]),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"red",text:""},on:{click:e.closeUserProfileDialog}},[e._v("关闭")]),s("v-btn",{attrs:{color:"blue",text:""},on:{click:e.saveProfile}},[e._v("确认修改")])],1)],1)],1)]],2)],1)}),[],!1,null,"d6ee69ca",null,null).exports)}}}));
