System.register(["./index-legacy.210b211c.js","./echarts-legacy.2e12b6e6.js"],(function(t,e){"use strict";var a,r;return{setters:[function(t){a=t.n},function(t){r=t.e}],execute:function(){t("default",a({data:function(){return{chartData:{workloads:[],expectedDates:[],actualDates:[],dates:[],resWorkloads:[]}}},mounted:function(){this.drawP(),this.drawB()},methods:{transform:function(t){return"A"===t?"已完成":"B"===t?"进行中":"C"===t?"未开始":"D"===t?"不合法":void 0},getColor:function(t){return"A"===t?"green":"B"===t?"orange":"C"===t?"blue":"D"===t?"red":void 0},drawP:function(){var t=r.exports.init(this.$refs.chart);window.addEventListener("resize",(function(){t.resize()}));var e=this.$route.query.projectItem,a=this.$route.query.projectItemStart,o=this.$route.query.projectItemEnd,n=this.$route.query.projectState,s=a.map((function(t){return new Date(t).valueOf()}));console.log(s);var i=o.map((function(t,e){return new Date(t).valueOf()-s[e]}));console.log(i);for(var l=s[0],u=0;u<s.length;u++)s[u]<l&&(l=s[u]);console.log(l);var c={title:{text:"任务进度显示图"},tooltip:{trigger:"axis",formatter:function(t){var e,a=t[1],r=n[a.dataIndex],o=s[a.dataIndex],l=s[a.dataIndex]+i[a.dataIndex];return"A"===r?e="已完成":"B"===r?e="进行中":"C"===r?e="未开始":"D"===r?e="延期已完成":"E"===r&&(e="延期未完成"),a.name+"<br/>"+a.seriesName+" : "+new Date(o).getFullYear()+"-"+(new Date(o).getMonth()+1)+"-"+new Date(o).getDate()+"--\x3e"+new Date(l).getFullYear()+"-"+(new Date(o).getMonth()+1)+"-"+new Date(l).getDate()+"<br/>状态："+e}},grid:{left:"3%",right:"4%",bottom:"30%",containLabel:!0},yAxis:{type:"category",splitLine:{show:!1},data:e},xAxis:{type:"value",min:l,axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},series:[{name:"Placeholder",type:"bar",stack:"Total",itemStyle:{borderColor:"transparent",color:"transparent"},emphasis:{itemStyle:{borderColor:"transparent",color:"transparent"}},data:s},{name:"周期",type:"bar",stack:"Total",itemStyle:{normal:{color:function(t){var e=n[t.dataIndex];return"A"===e?"green":"B"===e?"orange":"C"===e?"blue":"D"===e?"red":"E"===e?"yellow":void 0}}},data:i}]};t.setOption(c)},drawB:function(){this.chartData.workloads=this.$route.query.workloads,this.chartData.expectedDates=this.$route.query.expectedDates;for(var t=0;t<this.chartData.workloads.length;t++)this.chartData.workloads[t]=parseInt(this.chartData.workloads[t]);for(var e=0;e<this.$route.query.actualDates.length;e++)"2050-12-31"!==this.$route.query.actualDates[e]&&this.chartData.actualDates.push(this.$route.query.actualDates[e]);for(var a=0,o=0;o<this.chartData.workloads.length;o++)a+=this.chartData.workloads[o];console.log(a);for(var n=this.chartData.expectedDates.map((function(t){return new Date(t).valueOf()})),s=[],i=0;i<n.length;i++)s.push(n[i]);n.sort()[0];for(var l=new Set(n),u=Array.from(l),c=[],h=a,d=0;d<u.length;d++){for(var f=0;f<s.length;f++)s[f]==u[d]&&(h-=this.chartData.workloads[f]);c.push([u[d],h])}console.log(c);for(var g=0;g<this.chartData.actualDates.length;g++)""==this.chartData.actualDates[g]&&this.chartData.actualDates.splice(g,1);for(var p=this.chartData.actualDates.map((function(t){return new Date(t).valueOf()})),D=[],v=0;v<p.length;v++)D.push(p[v]);p.sort()[0];var m,w=new Set(p),y=Array.from(w),x=[];h=a;for(var b=0;b<y.length;b++){for(var k=0;k<D.length;k++)D[k]==y[b]&&(h-=this.chartData.workloads[k]);x.push([y[b],h])}function S(t,e){return t[0]-e[0]}console.log(x),m=0==p.length||n[0]<p[0]?n[0]:p[0],m-=864e5,x.push([m,a]),c.push([m,a]),x.sort(S),c.sort(S);var $=r.exports.init(document.getElementById("burnup-chart"));window.addEventListener("resize",(function(){$.resize()})),$.setOption({title:{text:"燃尽图"},legend:{data:["预期中的剩余工作量","实际的剩余工作量"],y:"bottom",x:"center"},tooltip:{trigger:"axis",formatter:function(t){return t[0].seriesName+":"+t[0].value[1]}},xAxis:{type:"value",min:m,axisLabel:{color:"#333",formatter:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}}},yAxis:{type:"value"},series:[{name:"预期中的剩余工作量",type:"line",data:c},{name:"实际的剩余工作量",type:"line",data:x}]})},back:function(){this.$router.go(-1)}}},(function(){var t=this,e=t._self._c;return e("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[e("div",{staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"6%"},attrs:{id:"burnup-chart"}},[t._v(" 燃尽图 ")]),e("div",{ref:"chart",staticStyle:{position:"absolute",width:"80%",height:"40%",left:"10%",top:"52%"}},[t._v(" 进度显示图 ")]),e("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""},on:{click:t.back}},[e("v-icon",{attrs:{dark:"",left:""}},[t._v(" mdi-arrow-left ")]),t._v(" 返回 ")],1)],1)}),[],!1,null,null,null,null).exports)}}}));
