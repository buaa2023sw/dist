import{s as i,f as n,g as r,h as a}from"./user.24644c3d.js";/* empty css                                                                         */import{n as c}from"./index.6eb7c32c.js";const d={name:"AllProject",created(){this.getPersonList()},data(){return{headers:[{text:"\u56FE\u6807",align:"start",sortable:!1,value:"icon"},{text:"\u79FB\u9664",value:"remove"},{text:"\u66F4\u6539",value:"change"}],inject:{user:{defualt:null},selectedProj:{defualt:null}},selectedProj:{id:"1"},user:{id:"1"},radioGroup:"\u7BA1\u7406\u5458",personData:[],search:"",setupDialog:!1,changeDialog:!1,newPersonForm:{id:""},idTemp:"",changeRoleForm:{id:"",role:""}}},methods:{getPersonList(){i({projectId:this.selectedProj.id,userId:this.user.id}).then(o=>{console.log(o),this.personData=o.data.data})},filterName(o,e,t){return console.log("123"),console.log(t),e!=null&&t.peopleName.toString().indexOf(e)!==-1},handleChange(o){console.log("123"),this.changeRoleForm.id=o.peopleId,this.changeDialog=!0,console.log(this.changeRoleForm)},handleClose(o){this.$confirm("\u786E\u8BA4\u5173\u95ED\uFF1F").then(()=>{o()}).catch(()=>{})},handleDelete(o){this.$confirm("\u6B64\u64CD\u4F5C\u5C06\u79FB\u9664\u8BE5\u7528\u6237, \u662F\u5426\u7EE7\u7EED?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{n({projectId:this.selectedProj.id,personId:o.peopleId,userId:this.user.id}).then(e=>{console.log(e)}),this.getPersonList(),this.$message({type:"success",message:"\u5220\u9664\u6210\u529F!"})}).catch(()=>{this.$message({type:"info",message:"\u5DF2\u53D6\u6D88\u5220\u9664"})})},setupPerson(){r({projectId:this.selectedProj.id,personId:this.newPersonForm.id,userId:this.user.id}).then(o=>{console.log(o);var e=o.data.errcode;console.log(e),e==3&&this.$message({type:"info",message:"\u60A8\u6CA1\u6709\u6743\u9650\u9080\u8BF7\u6210\u5458"})}),this.getPersonList(),this.setupDialog=!1,this.newPersonForm.id=""},changeRole(){this.changeRoleForm.role=="\u5F00\u53D1\u4EBA\u5458"?this.changeRoleForm.role="A":this.changeRoleForm.role=="\u7BA1\u7406\u5458"&&(this.changeRoleForm.role="B"),console.log(this.changeRoleForm),a({projectId:this.selectedProj.id,userId:this.user.id,role:this.changeRoleForm.role,personId:this.changeRoleForm.id}).then(o=>{console.log(o)}),this.changeDialog=!1,this.changeRoleForm.id="",this.changeRoleForm.role=""},getColor(o){return o=="A"?"orange":o=="B"?"green":"blue"},classify(o){if(o=="A")return"\u5F00\u53D1\u4EBA\u5458";if(o=="B")return"\u7BA1\u7406\u5458";if(o=="C")return"\u8D1F\u8D23\u4EBA"}}};var h=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"100%",height:"100%"}},[e._m(0),t("div",{staticClass:"three"},[t("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"hide-default-header":"",items:e.personData,"items-per-page":5,"item-key":"name",search:e.search,"custom-filter":e.filterName,height:""},scopedSlots:e._u([{key:"top",fn:function(){return[t("div",{staticStyle:{width:"100%",height:"100%",position:"relative"}},[t("v-text-field",{staticClass:"mx-4",staticStyle:{width:"30%",display:"inline-block"},attrs:{label:"\u8F93\u5165\u540D\u79F0"},model:{value:e.search,callback:function(s){e.search=s},expression:"search"}}),t("v-btn",{staticStyle:{top:"20%",right:"2%",height:"60%",width:"10%",position:"absolute"},attrs:{depressed:"",color:"primary"},on:{click:function(s){e.setupDialog=!0}}},[e._v("\u6DFB\u52A0\u6210\u5458 "),t("v-icon",{attrs:{dark:"",right:""}},[e._v(" mdi-account-plus ")])],1)],1)]},proxy:!0},{key:"item.icon",fn:function({item:s}){return[t("div",{staticStyle:{height:"70px",position:"relative",width:"900px"}},[t("v-avatar",{staticStyle:{position:"absolute",top:"10%"},attrs:{size:"60"}},[t("img",{attrs:{src:"https://cdn.vuetifyjs.com/images/john.jpg",alt:"John"}})]),t("v-p",{staticStyle:{position:"absolute",top:"5%",left:"10%","font-size":"large","font-weight":"500"}},[e._v(e._s(s.peopleName))]),t("v-chip",{staticStyle:{position:"absolute",top:"50%",left:"9%"},attrs:{color:e.getColor(s.peopleJob),dark:""}},[e._v(" "+e._s(e.classify(s.peopleJob))+" ")])],1)]}},{key:"item.remove",fn:function({item:s}){return[s.peopleJob!="C"?t("v-btn",{attrs:{depressed:""},on:{click:function(l){return e.handleDelete(s)}}},[e._v(" \u79FB\u9664\u7528\u6237 ")]):e._e()]}},{key:"item.change",fn:function({item:s}){return[s.peopleJob!="C"?t("v-btn",{attrs:{depressed:""},on:{click:function(l){return e.handleChange(s)}}},[e._v(" \u66F4\u6539\u89D2\u8272 ")]):e._e()]}}],null,!0)})],1),t("el-dialog",{staticStyle:{position:"relative"},attrs:{title:"\u6DFB\u52A0\u6210\u5458",visible:e.setupDialog,width:"50%","before-close":e.handleClose},on:{"update:visible":function(s){e.setupDialog=s}}},[t("el-form",{attrs:{"label-position":e.left,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"\u7528\u6237id"}},[t("el-input",{staticStyle:{width:"400px"},model:{value:e.newPersonForm.id,callback:function(s){e.$set(e.newPersonForm,"id",s)},expression:"newPersonForm.id"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.setupDialog=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.setupPerson}},[e._v("\u786E \u5B9A")])],1)],1),t("el-dialog",{staticStyle:{position:"relative"},attrs:{visible:e.changeDialog,width:"40%",height:"30","before-close":e.handleClose},on:{"update:visible":function(s){e.changeDialog=s}},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[e._v("\u8BF7\u9009\u62E9\u4F60\u8981\u4E3A\u8BE5\u6210\u5458\u5206\u914D\u7684"),t("strong",[e._v("\u89D2\u8272")])])]},proxy:!0}])},[t("v-radio-group",{staticStyle:{top:"50px",position:"absolute"},model:{value:e.changeRoleForm.role,callback:function(s){e.$set(e.changeRoleForm,"role",s)},expression:"changeRoleForm.role"}},[t("v-radio",{attrs:{value:"\u7BA1\u7406\u5458"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("strong",{staticClass:"success--text"},[e._v("\u7BA1\u7406\u5458")])])]},proxy:!0}])}),t("v-radio",{attrs:{value:"\u5F00\u53D1\u4EBA\u5458"},scopedSlots:e._u([{key:"label",fn:function(){return[t("div",[t("strong",{staticClass:"orange--text"},[e._v("\u5F00\u53D1\u4EBA\u5458")])])]},proxy:!0}])})],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(s){e.changeDialog=!1}}},[e._v("\u53D6 \u6D88")]),t("el-button",{attrs:{type:"primary"},on:{click:e.changeRole}},[e._v("\u786E \u5B9A")])],1)],1)],1)},u=[function(){var o=this,e=o._self._c;return e("div",{staticClass:"one"},[e("h1",{staticStyle:{position:"absolute",left:"5%",top:"10%"}},[o._v("\u9879\u76EE\u4EBA\u5458\u5217\u8868")])])}],p=c(d,h,u,!1,null,"f8783ee5",null,null);const m=p.exports;export{m as default};
